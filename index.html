<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Momentor — Your Four Pillars Reading</title>
<meta property="og:title" content="Momentor — Your Four Pillars Reading">
<meta property="og:description" content="More precise than astrology. Older than the zodiac. Your birth chart, to the exact hour.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://blirad.github.io/momentor-v5/">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Momentor — Your Four Pillars Reading">
<meta name="twitter:description" content="More precise than astrology. Older than the zodiac.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  /* ─── RESET & BASE ─── */
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  :root {
    --bg: #0d0b1e;
    --bg2: #110f27;
    --card-bg: rgba(255,255,255,0.04);
    --card-border: rgba(255,255,255,0.08);
    --gold: #c9a96e;
    --gold-light: #dfc08a;
    --gold-soft: rgba(201,169,110,0.75);
    --gold-dim: rgba(201,169,110,0.35);
    --gold-tint: rgba(201,169,110,0.08);
    --gold-glow: rgba(201,169,110,0.20);
    --text-primary: rgba(255,255,255,0.92);
    --text-secondary: rgba(255,255,255,0.68);
    --text-muted: rgba(255,255,255,0.48);
    --font-serif: 'Cormorant Garamond', Georgia, serif;
    --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    --radius: 12px;
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 20px;
    --max-w: 680px;
    --space-xs: 8px;
    --space-sm: 16px;
    --space-md: 24px;
    --space-lg: 32px;
    --space-xl: 48px;
    --space-2xl: 64px;
    --touch-min: 44px;
    --ls-wider: 0.12em;
    --ls-widest: 0.18em;
    --lh-body: 1.75;
    --lh-relaxed: 1.9;
  }
  html { scroll-behavior: smooth; }
  body {
    background:
      radial-gradient(ellipse 80% 50% at 50% -10%, rgba(100,80,200,0.15) 0%, transparent 60%),
      radial-gradient(ellipse 60% 40% at 80% 80%, rgba(201,169,110,0.06) 0%, transparent 50%),
      linear-gradient(180deg, #0d0b1e 0%, #111030 30%, #130d2a 60%, #0e1020 100%);
    color: var(--text-primary);
    font-family: var(--font-sans);
    font-size: 16px;
    line-height: var(--lh-body);
    min-height: 100vh;
  }
  body::before {
    content: ''; position: fixed; inset: 0; z-index: 0;
    background-image:
      radial-gradient(1px 1px at 8% 12%,rgba(255,255,255,.35) 0%,transparent 100%),
      radial-gradient(1.5px 1.5px at 22% 5%,rgba(255,255,255,.25) 0%,transparent 100%),
      radial-gradient(0.8px 0.8px at 35% 42%,rgba(255,255,255,.2) 0%,transparent 100%),
      radial-gradient(1px 1px at 50% 18%,rgba(255,255,255,.3) 0%,transparent 100%),
      radial-gradient(1.5px 1.5px at 65% 8%,rgba(255,255,255,.4) 0%,transparent 100%),
      radial-gradient(1px 1px at 78% 55%,rgba(255,255,255,.2) 0%,transparent 100%),
      radial-gradient(0.8px 0.8px at 88% 30%,rgba(255,255,255,.25) 0%,transparent 100%),
      radial-gradient(1px 1px at 15% 75%,rgba(255,255,255,.2) 0%,transparent 100%),
      radial-gradient(1.5px 1.5px at 45% 88%,rgba(255,255,255,.15) 0%,transparent 100%),
      radial-gradient(1px 1px at 92% 65%,rgba(255,255,255,.3) 0%,transparent 100%),
      radial-gradient(0.8px 0.8px at 30% 95%,rgba(255,255,255,.2) 0%,transparent 100%),
      radial-gradient(1px 1px at 72% 82%,rgba(255,255,255,.18) 0%,transparent 100%),
      radial-gradient(2px 2px at 55% 25%,rgba(201,169,110,.25) 0%,transparent 100%),
      radial-gradient(1.5px 1.5px at 20% 60%,rgba(201,169,110,.18) 0%,transparent 100%),
      radial-gradient(2px 2px at 80% 15%,rgba(138,100,220,.18) 0%,transparent 100%);
    pointer-events: none;
  }

  /* ─── LAYOUT ─── */
  .container {
    max-width: var(--max-w);
    margin: 0 auto;
    padding: 0 20px;
    position: relative;
    z-index: 1;
  }

  /* ─── HEADER ─── */
  .site-header {
    padding: 24px 20px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: var(--max-w);
    margin: 0 auto;
    border-bottom: 1px solid var(--card-border);
    position: sticky;
    top: 0;
    z-index: 100;
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    background: rgba(13,11,30,0.85);
  }
  .logo {
    font-family: var(--font-serif);
    font-size: 22px;
    font-weight: 300;
    letter-spacing: .08em;
    color: var(--gold);
  }
  .lang-toggle {
    display: flex;
    gap: 4px;
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 20px;
    padding: 3px;
  }
  .lang-btn {
    padding: 3px 12px;
    border: none;
    background: none;
    color: var(--text-secondary);
    font-size: 12px;
    font-family: var(--font-sans);
    cursor: pointer;
    border-radius: 16px;
    transition: all .2s;
  }
  .lang-btn.active {
    background: var(--gold);
    color: #0d0b1e;
    font-weight: 600;
  }

  /* ─── FORMS ─── */
  #section-form {
    padding: 60px 0 80px;
  }
  .form-intro {
    text-align: center;
    margin-bottom: 48px;
  }
  .form-intro h1 {
    font-family: var(--font-serif);
    font-size: clamp(28px, 6vw, 42px);
    font-weight: 300;
    line-height: 1.2;
    color: var(--text-primary);
    margin-bottom: 12px;
  }
  .form-intro p {
    font-size: 15px;
    color: var(--text-secondary);
    max-width: 380px;
    margin: 0 auto;
  }
  .form-step { display: none; }
  .form-step.active { display: block; }
  .form-step h2 {
    font-family: var(--font-serif);
    font-size: 22px;
    font-weight: 400;
    color: var(--text-primary);
    margin-bottom: 24px;
  }
  .form-group { margin-bottom: 20px; }
  .form-group label {
    display: block;
    font-size: 12px;
    letter-spacing: .1em;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-bottom: 8px;
  }
  .form-group input, .form-group select {
    width: 100%;
    padding: 14px 16px;
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: var(--radius);
    color: var(--text-primary);
    font-size: 16px;
    font-family: var(--font-sans);
    outline: none;
    transition: border-color .2s;
  }
  .form-group input:focus, .form-group select:focus {
    border-color: var(--gold-dim);
  }
  .form-group select option { background: #1a1730; }
  .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
  .gender-select { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
  .gender-btn {
    padding: 14px;
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: var(--radius);
    color: var(--text-secondary);
    font-size: 15px;
    cursor: pointer;
    text-align: center;
    transition: all .2s;
  }
  .gender-btn.selected {
    border-color: var(--gold-dim);
    color: var(--gold);
    background: rgba(232,197,71,0.06);
  }
  .no-time-label {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 14px;
    color: var(--text-secondary);
    cursor: pointer;
    margin-top: 8px;
  }
  .no-time-label input[type=checkbox] { accent-color: var(--gold); width: 16px; height: 16px; }
  .btn-primary {
    width: 100%;
    padding: 16px;
    background: var(--gold);
    color: #0d0b1e;
    border: none;
    border-radius: var(--radius);
    font-size: 16px;
    font-weight: 600;
    font-family: var(--font-sans);
    cursor: pointer;
    transition: opacity 0.2s ease, transform 0.15s cubic-bezier(0.34,1.56,0.64,1), box-shadow 0.2s ease;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
  .btn-primary:hover { opacity: 1; transform: translateY(-1px); box-shadow: 0 8px 24px rgba(201,169,110,0.3); }
  .btn-primary:active { transform: scale(0.97) translateY(0); box-shadow: 0 2px 8px rgba(201,169,110,0.2); }
  .btn-secondary {
    background: none;
    border: 1px solid var(--card-border);
    color: var(--text-secondary);
    padding: 10px 20px;
    border-radius: var(--radius);
    font-size: 14px;
    cursor: pointer;
    transition: border-color .2s;
    font-family: var(--font-sans);
    margin-bottom: 20px;
  }
  .btn-secondary:hover { border-color: var(--gold-dim); color: var(--text-primary); }
  .error-msg {
    font-size: 13px;
    color: #ff6b6b;
    margin-top: 6px;
    display: none;
  }
  .error-msg.show { display: block; }
  .step-indicator {
    display: flex;
    gap: 6px;
    justify-content: center;
    margin-bottom: 32px;
  }
  .step-dot {
    width: 6px; height: 6px;
    border-radius: 50%;
    background: var(--card-border);
    transition: background .2s;
  }
  .step-dot.active { background: var(--gold); }

  /* ─── RESULTS ─── */
  #section-results { display: none; padding-bottom: 96px; }
  #section-results.visible { display: block; }
  body { padding-bottom: 72px; }

  /* ─── CHAPTER STRUCTURE ─── */
  .story-chapter {
    padding: 48px 0;
    background: rgba(255,255,255,0.02);
    border-radius: var(--radius-lg);
    margin-bottom: 8px;
    transition: all 0.3s cubic-bezier(0.16,1,0.3,1);
    position: relative;
    z-index: 1;
  }
  @media (hover: hover) {
    .story-chapter:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(201,169,110,0.10); }
    .dm-hero:hover { transform: translateY(-2px); box-shadow: 0 12px 36px rgba(201,169,110,0.15); }
    .daeun-card:hover { transform: translateY(-2px); border-color: rgba(255,255,255,0.14); }
    .daeun-card.is-current:hover { transform: translateY(-2px); box-shadow: 0 12px 36px rgba(201,169,110,0.15); }
  }
  .chapter-header {
    text-align: center;
    margin-bottom: 40px;
    padding-bottom: 28px;
    border-bottom: none;
    position: relative;
  }
  .chapter-header::after {
    content: '';
    position: absolute;
    bottom: 0; left: 10%; right: 10%;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(201,169,110,0.25) 30%, rgba(201,169,110,0.35) 50%, rgba(201,169,110,0.25) 70%, transparent);
  }
  .chapter-badge {
    font-size: 11px;
    letter-spacing: 0.20em;
    color: rgba(201,169,110,0.65);
    font-weight: 600;
    text-transform: uppercase;
    display: block;
    margin-bottom: 12px;
    font-family: var(--font-sans);
  }
  .chapter-badge::before { content: '— '; letter-spacing: 0; opacity: 0.5; }
  .chapter-title {
    font-family: var(--font-serif);
    font-size: clamp(22px, 5vw, 30px);
    font-weight: 300;
    color: var(--text-primary);
    margin-bottom: 8px;
  }
  .chapter-tagline {
    font-family: var(--font-serif);
    font-size: 14px;
    font-style: italic;
    color: var(--text-secondary);
  }
  .chapter-divider {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 40px 0;
    color: var(--gold-dim);
    font-size: 12px;
    letter-spacing: .15em;
  }
  .chapter-divider::before, .chapter-divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--gold-dim), transparent);
  }

  /* ─── BRIDGE ─── */
  .chapter-bridge {
    padding: 40px 0;
    text-align: center;
    position: relative;
    background: linear-gradient(180deg, #0d0b1e 0%, #12103a 50%, #0d0b1e 100%);
  }
  .chapter-bridge::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--gold-dim), transparent);
  }
  .chapter-bridge.bridge-to-paywall {
    padding: 56px 0;
    background: radial-gradient(ellipse 100% 100% at 50% 50%, rgba(201,169,110,0.05) 0%, transparent 70%);
  }
  .bridge-inner {
    position: relative;
    background: transparent;
    display: inline-block;
    padding: 0 32px;
    max-width: 320px;
  }
  .bridge-inner p {
    font-family: var(--font-serif);
    font-size: 18px;
    font-style: normal;
    color: rgba(255,255,255,0.90);
    line-height: var(--lh-relaxed);
    letter-spacing: -0.01em;
  }
  .bridge-question {
    font-size: 20px !important;
    color: var(--gold) !important;
    font-style: normal !important;
    margin-top: 6px;
  }

  /* ─── CARDS ─── */
  .card {
    background: linear-gradient(135deg, rgba(255,255,255,0.055) 0%, rgba(255,255,255,0.02) 100%);
    border: 1px solid rgba(255,255,255,0.08);
    border-top: 1px solid rgba(255,255,255,0.13);
    border-radius: var(--radius-lg);
    padding: 24px;
    margin-bottom: 16px;
    box-shadow: 0 1px 0 rgba(255,255,255,0.05) inset, 0 8px 24px rgba(0,0,0,0.25), 0 2px 6px rgba(0,0,0,0.15);
  }

  /* ─── DAY MASTER HERO ─── */
  .dm-hero {
    background: linear-gradient(135deg, rgba(201,169,110,0.08) 0%, rgba(100,80,200,0.05) 50%, rgba(201,169,110,0.04) 100%);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(201,169,110,0.20);
    border-top: 1px solid rgba(201,169,110,0.30);
    border-radius: var(--radius-xl);
    padding: 32px 24px;
    margin-bottom: 20px;
    text-align: center;
    transition: all 0.3s cubic-bezier(0.16,1,0.3,1);
    position: relative;
    z-index: 1;
    box-shadow: 0 1px 0 rgba(201,169,110,0.15) inset, 0 20px 48px rgba(0,0,0,0.3), 0 0 60px rgba(201,169,110,0.06);
  }
  /* dm-hook comes before dm-char in DOM (리라 spec) */
  .dm-hook {
    font-family: var(--font-serif);
    font-size: clamp(17px, 4vw, 21px);
    font-weight: 400;
    color: var(--text-primary);
    line-height: 1.5;
    font-style: italic;
    border-left: 2px solid var(--gold);
    padding-left: 16px;
    text-align: left;
    margin-bottom: 20px;
  }
  .dm-char {
    font-family: var(--font-serif);
    font-size: clamp(48px, 12vw, 64px);
    font-weight: 300;
    color: var(--gold);
    line-height: 1;
    display: block;
    margin-bottom: 8px;
    text-shadow: 0 0 40px rgba(201,169,110,0.35);
    filter: drop-shadow(0 0 20px rgba(201,169,110,0.40));
    letter-spacing: -0.01em;
  }
  .dm-label {
    font-size: 14px;
    color: var(--gold-soft);
    letter-spacing: .1em;
    margin-bottom: 20px;
    font-family: var(--font-sans);
  }

  /* ─── IDENTITY TAGS ─── */
  .identity-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 20px;
  }
  .identity-tag {
    border-radius: 4px;
    background: rgba(201,169,110,0.07);
    border: 1px solid rgba(201,169,110,0.22);
    color: rgba(255,255,255,0.78);
    font-size: 11px;
    font-family: var(--font-sans);
    font-weight: 500;
    letter-spacing: 0.08em;
    padding: 4px 10px;
  }
  .identity-tag span { color: var(--gold-soft); margin-right: 4px; }

  /* ─── STORY TEXT ─── */
  .story-text {
    font-family: var(--font-serif);
    font-size: 17px;
    color: rgba(255,255,255,0.88);
    line-height: var(--lh-relaxed);
    margin-bottom: 16px;
    letter-spacing: 0.01em;
  }
  .story-text + .story-text { margin-top: 20px; }
  .story-section-label {
    font-size: 13px;
    font-weight: 600;
    letter-spacing: var(--ls-wider);
    text-transform: uppercase;
    color: rgba(201,169,110,0.85);
    margin: 32px 0 16px;
    font-family: var(--font-sans);
  }
  /* Shadow section overlay */
  .shadow-section-wrap {
    background: rgba(0,0,0,0.30);
    margin: 16px -24px;
    padding: 24px 24px;
    position: relative;
  }
  .shadow-section-wrap::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg, transparent, rgba(0,0,0,0.15), transparent);
    pointer-events: none;
  }

  /* T3-A: Past→Present connection block */
  .connection-moment {
    border-left: 3px solid var(--gold);
    background: rgba(232,197,71,0.04);
    padding: 20px 24px;
    margin: 16px 0;
    border-radius: 0 12px 12px 0;
  }

  /* T2-A: Conviction section (순수 텍스트 단락 - 미라 spec) */
  .conviction-section {
    padding: 40px 0;
    margin: 0 0 8px;
  }
  .conviction-section p {
    font-family: var(--font-serif);
    font-size: 17px;
    line-height: 1.75;
    color: rgba(255,255,255,0.88);
    text-align: left;
    margin-bottom: 1.5em;
  }
  .conviction-section p:last-child { margin-bottom: 0; }
  .conviction-section .conviction-closer {
    font-family: var(--font-serif);
    font-size: 17px;
    font-weight: 600;
    color: var(--text-primary);
    margin-top: 0;
    margin-bottom: 0;
  }

  /* T3-B: Daeun progress bar */
  .daeun-progress {
    margin-top: 12px;
  }
  .progress-bar {
    width: 100%;
    height: 4px;
    background: rgba(255,255,255,0.1);
    border-radius: 2px;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    background: var(--gold);
    border-radius: 2px;
    transition: width 0.8s ease;
  }
  .progress-meta {
    display: block;
    font-size: 12px;
    color: var(--text-muted);
    margin-top: 6px;
  }

  /* ─── ACCORDION ─── */
  .accordion-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 16px;
    cursor: pointer;
    font-size: 14px;
    color: var(--text-secondary);
    border-top: none;
    user-select: none;
    min-height: 48px;
    position: relative;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    transition: color 0.2s ease, background 0.2s ease;
  }
  .accordion-header::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08) 20%, rgba(255,255,255,0.12) 50%, rgba(255,255,255,0.08) 80%, transparent);
  }
  .accordion-header:hover { color: var(--text-primary); }
  .accordion-header:active { background: rgba(255,255,255,0.03); }
  .accordion-arrow { transition: transform .3s; }
  .accordion-header.open .accordion-arrow { transform: rotate(180deg); }
  .accordion-body { display: none; padding: 12px 0; }
  .accordion-body.open { display: block; }

  /* ─── PILLAR GRID ─── */
  .pillar-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
    margin-bottom: 16px;
  }
  .pillar-col {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 10px;
    padding: 14px 8px;
    text-align: center;
  }
  .pillar-col.day-col {
    border-color: var(--gold-dim);
    background: rgba(232,197,71,0.05);
  }
  .pillar-label {
    font-size: 10px;
    color: var(--text-muted);
    letter-spacing: .1em;
    margin-bottom: 8px;
    display: block;
  }
  .pillar-stem-char {
    font-family: var(--font-serif);
    font-size: 28px;
    font-weight: 400;
    color: var(--text-primary);
    line-height: 1;
    display: block;
  }
  .pillar-branch-char {
    font-family: var(--font-serif);
    font-size: 22px;
    color: var(--text-secondary);
    display: block;
    margin-top: 4px;
  }
  .pillar-elem-dot {
    width: 6px; height: 6px;
    border-radius: 50%;
    display: inline-block;
    margin-top: 6px;
  }
  .elem-Wood { background: #4ade80; }
  .elem-Fire { background: #f87171; }
  .elem-Earth { background: #d97706; }
  .elem-Metal { background: #94a3b8; }
  .elem-Water { background: #60a5fa; }

  /* ─── ELEMENTS BAR ─── */
  .elements-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 8px;
    margin-top: 8px;
  }
  .elem-col { text-align: center; }
  .elem-bar-wrap {
    height: 60px;
    display: flex;
    align-items: flex-end;
    justify-content: center;
    margin-bottom: 6px;
  }
  .elem-bar {
    width: 24px;
    border-radius: 4px 4px 0 0;
    transition: height .5s ease;
  }
  .elem-bar.elem-Wood { background: rgba(74,222,128,0.6); }
  .elem-bar.elem-Fire { background: rgba(248,113,113,0.6); }
  .elem-bar.elem-Earth { background: rgba(217,119,6,0.6); }
  .elem-bar.elem-Metal { background: rgba(148,163,184,0.6); }
  .elem-bar.elem-Water { background: rgba(96,165,250,0.6); }
  .elem-name { font-size: 11px; color: var(--text-muted); }
  .elem-count { font-size: 16px; font-weight: 600; color: var(--text-secondary); }

  /* ─── DAEUN TIMELINE ─── */
  .daeun-timeline {
    position: relative;
    padding-left: 28px;
  }
  .daeun-timeline::before {
    content: '';
    position: absolute;
    left: 8px; top: 12px; bottom: 12px;
    width: 1px;
    background: linear-gradient(to bottom, transparent, var(--gold-dim), transparent);
  }
  .daeun-card {
    position: relative;
    background: rgba(255,255,255,0.05);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid var(--card-border);
    border-top: 1px solid rgba(255,255,255,0.10);
    border-radius: var(--radius-lg);
    padding: 20px;
    margin-bottom: 14px;
    transition: all 0.3s cubic-bezier(0.16,1,0.3,1);
    box-shadow: 0 4px 16px rgba(0,0,0,0.2);
  }
  .daeun-card::before {
    content: '';
    position: absolute;
    left: -22px; top: 22px;
    width: 8px; height: 8px;
    border-radius: 50%;
    background: var(--card-bg);
    border: 2px solid var(--gold-dim);
  }
  .daeun-card:active { transform: scale(0.99); }
  .daeun-card.is-current {
    border-color: rgba(201,169,110,0.15);
    background: rgba(201,169,110,0.04);
    box-shadow: 0 0 0 1px rgba(201,169,110,0.15) inset, 0 8px 32px rgba(201,169,110,0.12), 0 4px 16px rgba(0,0,0,0.25);
  }
  .daeun-card.is-current::before {
    background: var(--gold);
    border-color: var(--gold);
  }
  .daeun-top {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: 10px;
    flex-wrap: wrap;
    gap: 8px;
  }
  .daeun-era-badge {
    font-size: 9px;
    letter-spacing: .12em;
    text-transform: uppercase;
    font-weight: 700;
    padding: 3px 8px;
    border-radius: 4px;
  }
  .era-past { background: rgba(255,255,255,0.06); color: var(--text-muted); }
  .era-current { background: rgba(232,197,71,0.15); color: var(--gold); }
  .daeun-period { font-size: 12px; color: var(--text-secondary); }
  .daeun-pillars {
    font-family: var(--font-serif);
    font-size: 28px;
    font-weight: 300;
    color: var(--text-primary);
    line-height: 1;
    margin-bottom: 10px;
  }
  .daeun-pillars span { color: var(--text-secondary); font-size: 22px; }
  .daeun-narrative {
    font-family: var(--font-serif);
    font-size: 15px;
    color: var(--text-secondary);
    line-height: 1.75;
    margin-bottom: 10px;
  }
  .daeun-lifestage {
    font-size: 11px;
    color: var(--text-muted);
    margin-bottom: 10px;
    letter-spacing: .05em;
  }
  .daeun-resonance {
    font-size: 12px;
    color: var(--text-muted);
    font-style: italic;
    margin-top: 8px;
    border-top: 1px solid var(--card-border);
    padding-top: 10px;
  }

  /* ─── CHAPTER 3 CURRENT ─── */
  .current-hero {
    background: linear-gradient(135deg, rgba(232,197,71,0.06), rgba(60,100,200,0.06));
    border: 1px solid var(--gold-dim);
    border-radius: 16px;
    padding: 28px 24px;
    margin-bottom: 20px;
    text-align: center;
  }
  .current-badge {
    display: inline-block;
    background: rgba(232,197,71,0.15);
    color: var(--gold);
    font-size: 10px;
    letter-spacing: .15em;
    font-weight: 700;
    padding: 4px 12px;
    border-radius: 12px;
    text-transform: uppercase;
    margin-bottom: 16px;
  }
  .current-pillar-char {
    font-family: var(--font-serif);
    font-size: 48px;
    font-weight: 300;
    color: var(--gold);
    display: block;
    margin-bottom: 8px;
  }
  .current-desc {
    font-family: var(--font-serif);
    font-size: 16px;
    color: var(--text-secondary);
    font-style: italic;
    line-height: 1.6;
  }
  .today-hint {
    background: rgba(255,255,255,0.03);
    border: 1px solid var(--card-border);
    border-radius: 10px;
    padding: 16px 20px;
    margin-top: 16px;
  }
  .today-hint-label {
    font-size: 10px;
    letter-spacing: .15em;
    color: var(--text-muted);
    text-transform: uppercase;
    margin-bottom: 8px;
  }
  .today-hint-text {
    font-family: var(--font-serif);
    font-size: 15px;
    color: var(--text-secondary);
    line-height: 1.65;
  }
  .strength-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin-top: 12px;
  }
  .strength-item {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 8px;
    padding: 12px;
    font-size: 13px;
    color: var(--text-secondary);
    line-height: 1.4;
  }
  .strength-item.highlight { border-color: var(--gold-dim); color: var(--text-primary); }

  /* ─── CHAPTER 4 PAYWALL ─── */
  .future-preview-wrap { margin-bottom: 24px; }
  .future-daeun-card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: var(--radius);
    padding: 20px;
    margin-bottom: 10px;
    position: relative;
    overflow: hidden;
  }
  .future-daeun-card.partial .fdc-fade {
    position: absolute;
    bottom: 0; left: 0; right: 0;
    height: 55%;
    background: linear-gradient(to bottom, transparent, var(--bg) 90%);
    pointer-events: none;
  }
  .future-daeun-card.locked {
    filter: blur(4px);
    opacity: 0.65;
    pointer-events: none;
    min-height: 80px;
  }
  .fdc-period { font-size: 12px; color: var(--text-secondary); margin-bottom: 6px; }
  .fdc-pillar {
    font-family: var(--font-serif);
    font-size: 30px;
    color: var(--text-primary);
    line-height: 1;
    margin-bottom: 8px;
  }
  .fdc-teaser {
    font-family: var(--font-serif);
    font-size: 15px;
    color: var(--text-secondary);
    line-height: 1.7;
  }
  .paywall-cta-wrap {
    text-align: center;
    padding: 40px 0 20px;
  }
  .paywall-hook {
    font-family: var(--font-serif);
    font-size: clamp(28px, 7vw, 36px);
    font-weight: 500;
    color: var(--text-primary);
    line-height: 1.3;
    letter-spacing: -0.01em;
    margin-bottom: 12px;
  }
  .paywall-hook-sub {
    font-family: var(--font-serif);
    font-size: clamp(22px, 5vw, 28px);
    font-weight: 400;
    color: rgba(255,255,255,0.78);
    line-height: 1.4;
    margin-top: 12px;
    margin-bottom: 20px;
  }
  .paywall-sub {
    font-size: 15px;
    color: rgba(255,255,255,0.68);
    margin-bottom: 32px;
    line-height: 1.65;
  }
  /* 소셜 프루프 */
  .testimonial-block {
    margin: 24px 0;
    padding: 20px 0;
    border-top: 1px solid rgba(255,255,255,0.07);
    text-align: left;
  }
  .testimonial-stars { font-size: 14px; letter-spacing: 2px; color: var(--gold); margin-bottom: 10px; }
  .testimonial-text { font-family: var(--font-serif); font-size: 15px; font-style: italic; color: rgba(255,255,255,0.80); line-height: 1.7; margin-bottom: 10px; }
  .testimonial-attr { font-size: 12px; color: rgba(255,255,255,0.40); letter-spacing: 0.05em; }
  /* 이메일 캡처 */
  .email-capture-wrap {
    margin: 32px 0;
    padding: 24px;
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.07);
    border-radius: var(--radius-lg);
    text-align: left;
  }
  .email-capture-label { font-size: 14px; color: rgba(255,255,255,0.65); margin-bottom: 16px; line-height: 1.5; }
  .email-capture-input {
    width: 100%; height: 48px; padding: 0 16px;
    background: var(--card-bg); border: 1px solid rgba(255,255,255,0.20);
    border-radius: var(--radius-md); color: var(--text-primary); font-size: 16px;
    font-family: var(--font-sans); outline: none; margin-bottom: 10px;
    transition: border-color 0.2s;
  }
  .email-capture-input:focus { border-color: var(--gold-dim); }
  .btn-email-cta {
    width: 100%; height: 46px;
    background: rgba(201,169,110,0.12);
    border: 1px solid rgba(201,169,110,0.35);
    border-radius: var(--radius-md);
    color: var(--gold); font-size: 14px; font-weight: 500;
    cursor: pointer; transition: background 0.2s, border-color 0.2s;
    font-family: var(--font-sans);
    -webkit-tap-highlight-color: transparent;
  }
  .btn-email-cta:hover { background: rgba(201,169,110,0.18); border-color: rgba(201,169,110,0.5); }
  .email-captured-msg { font-size: 14px; color: var(--gold); text-align: center; padding: 12px 0; display: none; }
  /* 환불 보장 */
  .refund-note { font-size: 12px; color: rgba(255,255,255,0.45); text-align: center; margin-top: 20px; line-height: 1.6; }
  .trust-badges { display: flex; align-items: center; justify-content: center; gap: 12px; margin-top: 12px; flex-wrap: wrap; }
  .trust-badge { font-size: 12px; color: rgba(255,255,255,0.40); }
  .btn-unlock {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    width: 100%;
    max-width: 380px;
    margin: 0 auto;
    height: 54px;
    padding: 0 24px;
    background-image: linear-gradient(105deg, #c9a96e 0%, #dfc08a 35%, #f5d899 50%, #dfc08a 65%, #c9a96e 100%);
    background-size: 300% auto;
    animation: shimmer 8s ease-in-out infinite;
    color: #0d0b1e;
    border: none;
    border-radius: var(--radius-md);
    font-size: 16px;
    font-weight: 700;
    font-family: var(--font-sans);
    cursor: pointer;
    text-decoration: none;
    transition: transform 0.15s cubic-bezier(0.34,1.56,0.64,1), box-shadow 0.2s ease;
    position: relative;
    overflow: hidden;
    -webkit-tap-highlight-color: transparent;
    letter-spacing: 0.03em;
  }
  .btn-unlock::before { content: '✦'; font-size: 12px; opacity: 0.8; }
  @keyframes shimmer {
    0% { background-position: -200% center; }
    100% { background-position: 200% center; }
  }
  .btn-unlock:hover { transform: translateY(-2px); box-shadow: 0 12px 32px rgba(201,169,110,0.35); opacity: 1; }
  .btn-unlock:active { transform: scale(0.97); box-shadow: 0 2px 8px rgba(201,169,110,0.2); }
  .paywall-fine {
    font-size: 13px;
    color: var(--text-muted);
    margin-top: 14px;
  }
  .paywall-trust {
    margin-top: 24px;
    padding: 16px;
    background: rgba(255,255,255,0.03);
    border-radius: 10px;
    font-size: 13px;
    color: var(--text-secondary);
    line-height: 1.6;
  }

  /* ─── TOAST ─── */
  .toast {
    position: fixed;
    bottom: 24px; left: 50%;
    transform: translateX(-50%) translateY(60px);
    background: rgba(30,28,50,0.95);
    border: 1px solid var(--card-border);
    border-radius: 24px;
    padding: 10px 20px;
    font-size: 14px;
    color: var(--text-primary);
    z-index: 9999;
    transition: transform .3s ease;
    pointer-events: none;
    white-space: nowrap;
  }
  .toast.show { transform: translateX(-50%) translateY(0); }

  /* ─── REVEAL ─── */
  @keyframes revealUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .reveal {
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.6s cubic-bezier(0.16,1,0.3,1), transform 0.6s cubic-bezier(0.16,1,0.3,1);
  }
  .reveal.visible { opacity: 1; transform: none; }
  .reveal:nth-child(2) { transition-delay: 0.08s; }
  .reveal:nth-child(3) { transition-delay: 0.16s; }
  .reveal:nth-child(4) { transition-delay: 0.24s; }
  .dm-hero.reveal {
    filter: blur(4px);
    transition: opacity 0.8s cubic-bezier(0.16,1,0.3,1), transform 0.8s cubic-bezier(0.16,1,0.3,1), filter 0.8s cubic-bezier(0.16,1,0.3,1);
  }
  .dm-hero.reveal.visible { filter: blur(0); }
  .revealed { animation: revealUp 0.6s cubic-bezier(0.16,1,0.3,1) forwards; }
  @media (prefers-reduced-motion: reduce) {
    .reveal { transition: opacity 0.3s ease; transform: none; filter: none; }
    .dm-hero.reveal { filter: none; }
    .btn-unlock { animation: none; }
    * { transition-duration: 0.01ms !important; }
  }

  /* ─── CHAPTER NAV DOTS ─── */
  .chapter-nav {
    position: fixed;
    right: 16px;
    top: 50%;
    transform: translateY(-50%);
    display: none;
    flex-direction: column;
    gap: 8px;
    z-index: 100;
  }
  .chapter-nav.visible { display: flex; }
  .cnav-dot {
    width: 7px; height: 7px;
    border-radius: 50%;
    background: var(--card-border);
    cursor: pointer;
    transition: background .2s, transform .2s;
  }
  .cnav-dot.active { background: var(--gold); transform: scale(1.3); }

  /* ─── TIME INCENTIVE ─── */
  .time-incentive {
    font-size: 13px;
    color: var(--gold-soft);
    text-align: center;
    margin-bottom: 8px;
  }
  /* ─── MORE DECADES HINT ─── */
  .more-decades-hint {
    text-align: center;
    color: var(--text-muted);
    font-size: 14px;
    padding: 16px;
  }
  /* ─── FORM TAGLINE2 ─── */
  .form-tagline2 {
    font-size: 13px;
    color: var(--text-secondary);
    text-align: center;
    margin-top: 4px;
  }

  /* ─── ELEMENT PILLAR GLOW ─── */
  [data-element="Wood"] .pillar-stem { color: #5de8a0; text-shadow: 0 0 24px rgba(93,232,160,.4); }
  [data-element="Fire"] .pillar-stem  { color: #ff7eb3; text-shadow: 0 0 24px rgba(255,126,179,.4); }
  [data-element="Earth"] .pillar-stem { color: #f0b860; text-shadow: 0 0 24px rgba(240,184,96,.4); }
  [data-element="Metal"] .pillar-stem { color: #e0e8f0; text-shadow: 0 0 24px rgba(224,232,240,.4); }
  [data-element="Water"] .pillar-stem { color: #7eb8ff; text-shadow: 0 0 24px rgba(126,184,255,.4); }

  /* ─── DATE SELECTS ─── */
  .date-selects { display: grid; grid-template-columns: repeat(3,1fr); gap: 8px; }
  @media (max-width: 360px) { .date-selects { grid-template-columns: 1fr; gap: 6px; } }

  /* ─── STICKY CTA BAR ─── */
  .sticky-cta-bar {
    position: fixed; bottom: 0; left: 0; right: 0; z-index: 900;
    background: rgba(13,11,30,0.92);
    border-top: 1px solid rgba(201,169,110,0.30);
    padding: 12px 24px calc(12px + env(safe-area-inset-bottom,0px));
    backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
    display: flex; justify-content: center;
  }
  .sticky-cta-inner { display: flex; align-items: center; gap: 16px; max-width: 680px; width: 100%; justify-content: space-between; }
  .sticky-cta-text { color: rgba(255,255,255,0.72); font-size: 13px; line-height: 1.3; flex: 1; }
  .sticky-cta-btn {
    flex-shrink: 0;
    height: 40px; padding: 0 18px;
    background: var(--gold);
    color: #0d0b1e; font-weight: 700; font-size: 13px;
    border-radius: 8px; text-decoration: none;
    white-space: nowrap; border: none;
    -webkit-tap-highlight-color: transparent;
    transition: transform 0.15s ease;
    display: flex; align-items: center;
  }
  .sticky-cta-btn:active { transform: scale(0.97); }

  /* ─── PAYWALL ANCHOR ─── */
  .paywall-anchor { font-size: 12px; color: var(--text-muted); text-align: center; margin: 8px 0; }

  /* ─── LOADING SCENE ─── */
  .loading-overlay {
    position: fixed; inset: 0; z-index: 9000;
    background: rgba(13,11,30,0.96);
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    transition: opacity 0.5s ease;
  }
  .loading-overlay.hidden { opacity: 0; pointer-events: none; }
  .loading-symbol { font-family: var(--font-serif); font-size: 48px; color: var(--gold); margin-bottom: 24px; animation: pulsate 2s ease-in-out infinite; }
  @keyframes pulsate { 0%,100% { opacity: 0.5; transform: scale(0.97); } 50% { opacity: 1; transform: scale(1.03); } }
  .loading-text {
    font-family: var(--font-serif);
    font-size: 17px;
    color: rgba(255,255,255,0.82);
    text-align: center;
    line-height: 1.6;
    transition: opacity 0.4s ease;
    min-height: 30px;
  }
  .loading-text.fade-out { opacity: 0; }
  .loading-timestamp { font-size: 12px; color: var(--text-muted); margin-top: 16px; font-family: var(--font-sans); letter-spacing: 0.05em; }

  /* ─── EXIT INTENT POPUP ─── */
  .exit-popup {
    position: fixed; inset: 0; z-index: 8000;
    background: rgba(0,0,0,0.7);
    display: none; align-items: center; justify-content: center;
    padding: 20px;
  }
  .exit-popup.show { display: flex; }
  .exit-popup-inner {
    background: linear-gradient(135deg, #1a1534, #111030);
    border: 1px solid rgba(201,169,110,0.25);
    border-radius: var(--radius-xl);
    padding: 32px 28px;
    max-width: 380px; width: 100%;
    text-align: center;
    box-shadow: 0 24px 64px rgba(0,0,0,0.5);
  }
  .exit-popup-hook { font-family: var(--font-serif); font-size: 24px; font-weight: 500; color: var(--text-primary); margin-bottom: 12px; line-height: 1.3; }
  .exit-popup-sub { font-size: 14px; color: var(--text-secondary); line-height: 1.6; margin-bottom: 24px; }
  .exit-popup-close { font-size: 13px; color: var(--text-muted); cursor: pointer; margin-top: 16px; display: block; -webkit-tap-highlight-color: transparent; }
  .exit-popup-close:hover { color: var(--text-secondary); }

  /* ─── "DON'T KNOW BIRTH TIME" link ─── */
  .no-time-link {
    display: inline-block;
    font-size: 13px;
    color: var(--gold-soft);
    cursor: pointer;
    margin-top: 10px;
    text-decoration: underline;
    text-underline-offset: 2px;
    -webkit-tap-highlight-color: transparent;
  }
  .no-time-link:hover { color: var(--gold); }

  /* ─── GENDER LAYOUT (3 옵션) ─── */
  .gender-select { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; }

  /* global tap highlight reset */
  button, a, [role="button"] { -webkit-tap-highlight-color: transparent; touch-action: manipulation; }

  /* ─── RESPONSIVE ─── */
  @media (max-width: 480px) {
    .form-row { grid-template-columns: 1fr; }
    .pillar-grid { gap: 5px; }
    .pillar-stem-char { font-size: 24px; }
    .chapter-nav { display: none !important; }
    .strength-grid { grid-template-columns: 1fr; }
    .gender-select { grid-template-columns: 1fr 1fr; }
  }
  @media (max-width: 390px) {
    .container { padding: 0 20px; }
  }
</style>
</head>
<body>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<!-- LOADING OVERLAY -->
<div class="loading-overlay" id="loading-overlay" style="display:none">
  <div class="loading-symbol">✦</div>
  <div class="loading-text" id="loading-text">Calculating your chart...</div>
  <div class="loading-timestamp" id="loading-timestamp"></div>
</div>

<!-- EXIT INTENT POPUP -->
<div class="exit-popup" id="exit-popup">
  <div class="exit-popup-inner">
    <div class="exit-popup-hook">Wait — your chart is still here.</div>
    <p class="exit-popup-sub" id="exit-popup-sub">The decades ahead are written. The reading takes 3 minutes to unlock and stays yours forever.</p>
    <a class="btn-unlock" href="https://momentor.lemonsqueezy.com/checkout/buy/1350661" onclick="document.getElementById('exit-popup').classList.remove('show'); openPayModal(); return false;" style="max-width:none">
      See My Full Forecast — $7.99
    </a>
    <span class="exit-popup-close" onclick="document.getElementById('exit-popup').classList.remove('show')">No thanks, I'll pass on knowing what's next.</span>
  </div>
</div>

<!-- CHAPTER NAV DOTS -->
<div class="chapter-nav" id="chapterNav">
  <div class="cnav-dot active" data-ch="1" title="Ch.1"></div>
  <div class="cnav-dot" data-ch="2" title="Ch.2"></div>
  <div class="cnav-dot" data-ch="3" title="Ch.3"></div>
  <div class="cnav-dot" data-ch="4" title="Ch.4"></div>
</div>

<!-- SITE HEADER -->
<header class="site-header">
  <div class="logo">✦ Momentor</div>
  <div class="lang-toggle">
    <button class="lang-btn active" onclick="setLang('en')">EN</button>
    <button class="lang-btn" onclick="setLang('ko')">KR</button>
  </div>
</header>

<!-- SECTION: FORM -->
<section id="section-form">
  <div class="container">
    <div class="form-intro">
      <h1 id="form-title">You were already this person<br>the moment you arrived.</h1>
      <p id="form-subtitle">Before you had a name for it.<br>Your Four Pillars have been holding the answer.</p>
    </div>

    <div class="step-indicator">
      <div class="step-dot active" id="dot1"></div>
      <div class="step-dot" id="dot2"></div>
    </div>

    <!-- STEP 1 -->
    <div class="form-step active" id="step1">
      <h2 id="step1-title">Tell me about yourself</h2>
      <div class="form-group">
        <label id="label-name">Your name</label>
        <input type="text" id="inp-name" placeholder="First name">
        <div class="error-msg" id="err-name">Please enter your name.</div>
      </div>
      <div class="form-group">
        <label id="label-bday">Date of birth</label>
        <div class="date-selects">
          <select id="inp-year" class="time-select">
            <option value="">Year</option>
          </select>
          <select id="inp-month" class="time-select">
            <option value="">Month</option>
            <option value="1">January</option>
            <option value="2">February</option>
            <option value="3">March</option>
            <option value="4">April</option>
            <option value="5">May</option>
            <option value="6">June</option>
            <option value="7">July</option>
            <option value="8">August</option>
            <option value="9">September</option>
            <option value="10">October</option>
            <option value="11">November</option>
            <option value="12">December</option>
          </select>
          <select id="inp-day" class="time-select">
            <option value="">Day</option>
          </select>
        </div>
        <div class="error-msg" id="err-date">Please enter a valid date.</div>
      </div>
      <div class="form-group">
        <label id="label-gender">Gender</label>
        <div class="gender-select">
          <div class="gender-btn" id="gb-m" onclick="selectGender('M')">♂ <span id="gb-m-label">Male</span></div>
          <div class="gender-btn" id="gb-f" onclick="selectGender('F')">♀ <span id="gb-f-label">Female</span></div>
          <div class="gender-btn" id="gb-o" onclick="selectGender('O')">⚬ <span id="gb-o-label">Other</span></div>
        </div>
        <div class="error-msg" id="err-gender">Please select a gender.</div>
      </div>
      <button class="btn-primary" onclick="nextStep()" id="btn-step1-next">Continue →</button>
    </div>

    <!-- STEP 2 -->
    <div class="form-step" id="step2">
      <button class="btn-secondary" onclick="prevStep()">← <span id="btn-back-label">Back</span></button>
      <h2 id="step2-title">Birth time (optional)</h2>
      <p class="time-incentive">Adding your birth time unlocks your Hour Pillar — the most personal of the four.</p>
      <div class="form-group">
        <label id="label-time">Time of birth</label>
        <div class="form-row">
          <select id="inp-hour">
            <option value="" id="opt-hour">Hour</option>
          </select>
          <select id="inp-minute">
            <option value="" id="opt-min">Minute</option>
          </select>
        </div>
        <span class="no-time-link" id="notime-label" onclick="toggleNoTime()" tabindex="0" role="button">Don't know your birth time?</span>
        <input type="hidden" id="chk-notime" value="0">
      </div>
      <button class="btn-primary" onclick="generateReport()" id="btn-generate">See My Reading →</button>
      <p style="font-size:12px;color:var(--text-muted);text-align:center;margin-top:12px;">Free. Private. Instant. Just your birth moment, just your chart.</p>
    </div>
  </div>
</section>

<!-- SECTION: RESULTS -->
<section id="section-results">
  <div class="container">

    <!-- ══════════════════════════════════════════ -->
    <!-- CHAPTER 1: Who You Are                     -->
    <!-- ══════════════════════════════════════════ -->
    <div class="story-chapter" id="chapter-1">
      <div class="chapter-header reveal">
        <span class="chapter-badge">Chapter 1</span>
        <h2 class="chapter-title" id="ch1-title">Why You Are This Way</h2>
        <p class="chapter-tagline" id="ch1-tagline">You were this person from the beginning.</p>
      </div>

      <!-- Day Master Hero -->
      <div class="dm-hero reveal" id="dm-hero">
        <div class="dm-hook" id="dm-hook">Loading...</div>
        <span class="dm-char" id="dm-char">甲</span>
        <div class="dm-label" id="dm-label">Yang Wood · The Ancient Tree</div>
      </div>
      <!-- identity tags (moved below dm-hero) -->

      <!-- Identity Tags -->
      <div class="identity-tags reveal" id="identity-tags"></div>

      <!-- Story Body -->
      <div class="card reveal" id="dm-story-card">
        <p class="story-section-label" id="sl-origin">Origin</p>
        <p class="story-text" id="dm-body1"></p>
        <p class="story-section-label" id="sl-shadow">Shadow</p>
        <p class="story-text" id="dm-body2"></p>
        <p class="story-section-label" id="sl-invitation">Invitation</p>
        <p class="story-text" id="dm-body3"></p>
      </div>

      <!-- Pillars Grid (accordion) -->
      <div class="card reveal">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <span id="acc-pillars-label">Your Four Pillars</span>
          <span class="accordion-arrow">↓</span>
        </div>
        <div class="accordion-body" id="pillars-body">
          <div class="pillar-grid" id="pillar-grid"></div>
          <p style="font-size:12px;color:var(--text-muted);margin-top:8px" id="pillar-note">★ Day Pillar (日柱) is your core identity.</p>
        </div>
      </div>

      <!-- Elements Distribution (accordion) -->
      <div class="card reveal">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <span id="acc-elements-label">Energy Composition</span>
          <span class="accordion-arrow">↓</span>
        </div>
        <div class="accordion-body" id="elements-body">
          <div class="elements-grid" id="elements-grid"></div>
          <p class="story-text" id="elements-narrative" style="margin-top:16px;font-size:15px;"></p>
        </div>
      </div>
    </div>

    <!-- BRIDGE 1→2 -->
    <div class="chapter-bridge reveal">
      <div class="bridge-inner">
        <p id="bridge-12a">There is a reason you became this person.</p>
        <p class="bridge-question" id="bridge-12b">The chart remembers every decade that made you.</p>
      </div>
    </div>

    <!-- ══════════════════════════════════════════ -->
    <!-- CHAPTER 2: What You've Been Through        -->
    <!-- ══════════════════════════════════════════ -->
    <div class="story-chapter" id="chapter-2">
      <div class="chapter-header reveal">
        <span class="chapter-badge">Chapter 2</span>
        <h2 class="chapter-title" id="ch2-title">What You've Been Through</h2>
        <p class="chapter-tagline" id="ch2-tagline">The chart remembers your past.</p>
      </div>

      <div class="daeun-timeline reveal" id="past-daeun-list"></div>
    </div>

    <!-- BRIDGE 2→3 -->
    <div class="chapter-bridge reveal">
      <div class="bridge-inner">
        <p id="bridge-23a">None of those years were accidents.</p>
        <p id="bridge-23b2">The chart knew which ones would break you open —<br>and which ones would quietly rebuild.</p>
        <p class="bridge-question" id="bridge-23b">Now look where you are.</p>
      </div>
    </div>

    <!-- ══════════════════════════════════════════ -->
    <!-- CHAPTER 3: Where You Stand Now             -->
    <!-- ══════════════════════════════════════════ -->
    <div class="story-chapter" id="chapter-3">
      <div class="chapter-header reveal">
        <span class="chapter-badge">Chapter 3</span>
        <h2 class="chapter-title" id="ch3-title">Where You Stand Now</h2>
        <p class="chapter-tagline" id="ch3-tagline">The energy you're moving through today.</p>
      </div>

      <!-- Current Daeun Hero -->
      <div class="current-hero reveal" id="current-daeun-hero">
        <div class="current-badge" id="current-badge">Current Cycle</div>
        <span class="current-pillar-char" id="current-pillar-chars"></span>
        <p class="current-desc" id="current-desc"></p>
        <div id="current-daeun-progress"></div>
      </div>

      <!-- Strength Analysis -->
      <div class="card reveal">
        <p class="story-section-label" id="sl-strength">Your strengths now</p>
        <div class="strength-grid" id="strength-grid"></div>
      </div>

      <!-- Today's Energy Hint -->
      <div class="today-hint reveal">
        <div class="today-hint-label" id="today-label">Today's Energy</div>
        <p class="today-hint-text" id="today-text"></p>
      </div>

      <!-- Past → Present Connection -->
      <div class="connection-moment reveal" style="margin-top:16px">
        <p style="font-family:var(--font-serif);font-size:15px;color:var(--text-secondary);line-height:1.75" id="past-present-link"></p>
      </div>

    </div>

    <!-- CONVICTION SECTION (Bridge 3→4 직전 독립 섹션) -->
    <div class="conviction-section reveal container" id="conviction-section">
      <p id="conviction-text">Here is what the chart did to reach this reading.</p>
      <p>Your Day Pillar — <strong><span id="conviction-pillar"></span></strong> — was locked in at the exact hour you were born. Every cycle since then has been running on the same 60-year clock, unchanged for 3,000 years.</p>
      <p>The past decades you just read? Calculated. The one you're living now? Calculated. What comes next is already in the numbers.</p>
      <p class="conviction-closer" id="conviction-closer">The chart knew. It always knew.</p>
    </div>

    <!-- BRIDGE 3→4 -->
    <div class="chapter-bridge bridge-to-paywall reveal">
      <div class="bridge-inner">
        <p id="bridge-34a">You know who you are. You know where you've been.</p>
        <p class="bridge-question" id="bridge-34b">What comes next?</p>
      </div>
    </div>

    <!-- ══════════════════════════════════════════ -->
    <!-- CHAPTER 4: Where You're Going [PAYWALL]   -->
    <!-- ══════════════════════════════════════════ -->
    <div class="story-chapter" id="chapter-4">
      <div class="chapter-header reveal">
        <span class="chapter-badge">Chapter 4</span>
        <h2 class="chapter-title" id="ch4-title">Where You're Going</h2>
        <p class="chapter-tagline" id="ch4-tagline">The story not yet written.</p>
      </div>

      <!-- [1] HERO - Future Daeun Preview (blur) -->
      <div class="future-preview-wrap reveal" id="future-daeun-list"></div>

      <!-- Paywall wrapper (hidden until unlocked state is known) -->
      <div id="paywall-cta">

        <!-- [2] CTA BLOCK -->
        <div class="paywall-cta-wrap reveal">
          <p class="paywall-hook" id="paywall-hook">The chart knew. It always knew.</p>
          <p class="paywall-hook-sub" id="paywall-hook-sub" style="font-family:var(--font-serif);font-size:20px;color:rgba(255,255,255,0.72);line-height:1.5;margin-bottom:28px"></p>
          <p class="paywall-sub" id="paywall-sub">What happens in the decade after next?<br>What energy is coming — and when?<br><br>The chart has never been wrong about your past.<br>It won't start now.</p>
          <!-- [3] 앵커링 -->
          <p class="paywall-anchor" id="paywall-anchor">Co-Star: $8.99/month · Momentor: one reading, forever.</p>
          <a class="btn-unlock" id="btn-unlock" href="https://momentor.lemonsqueezy.com/checkout/buy/1350661" onclick="openPayModal(); return false;">
            See My Full Forecast — $7.99
          </a>
          <p class="paywall-fine" id="paywall-fine">One-time · No subscription · Yours forever.</p>
        </div>

        <!-- [4] SOCIAL PROOF -->
        <div class="testimonial-block reveal">
          <div class="testimonial-stars">★★★★★</div>
          <p class="testimonial-text">"I was skeptical. Then I read the chapter about my past decade. It described a relationship I never mentioned to anyone. How does a 3,000-year-old system know that?"</p>
          <p class="testimonial-attr">— Verified reader, 34, Seoul</p>
        </div>
        <div class="testimonial-block reveal" style="padding-top:16px;border-top:1px solid rgba(255,255,255,0.07)">
          <div class="testimonial-stars">★★★★★</div>
          <p class="testimonial-text">"I've used Co-Star for years. This is different. It doesn't tell you personality traits — it tells you what period of your life you're actually in. That changed everything."</p>
          <p class="testimonial-attr">— Verified reader, 28, New York</p>
        </div>

        <!-- [5] EMAIL CAPTURE -->
        <div class="email-capture-wrap reveal" id="email-capture-section">
          <p class="email-capture-label">Not ready? Get a reminder when you are — we'll send your reading link once, no spam.</p>
          <div id="email-capture-form">
            <input class="email-capture-input" type="email" id="inp-email" placeholder="your@email.com">
            <button class="btn-email-cta" onclick="saveEmail()">Save My Reading Link</button>
          </div>
          <p class="email-captured-msg" id="email-captured-msg">✦ Saved. Your link is waiting whenever you're ready.</p>
        </div>

        <!-- [6] REFUND & TRUST -->
        <div class="reveal" style="text-align:center;margin-top:20px;padding:20px 16px;background:rgba(255,255,255,0.02);border-radius:12px">
          <p style="font-size:14px;color:rgba(255,255,255,0.65);line-height:1.7;font-family:var(--font-serif);margin-bottom:16px">If the reading doesn't feel true to your life — within 24 hours of purchase, email us and we'll refund it. No questions.</p>
          <div class="trust-badges">
            <span class="trust-badge">🔒 Secure checkout</span>
            <span class="trust-badge">↩ 24h refund</span>
            <span class="trust-badge">🚫 No subscription</span>
            <span class="trust-badge">🔐 Private</span>
          </div>
        </div>
      </div><!-- end paywall-cta -->
    </div>

  </div>
</section>

<!-- STICKY CTA BAR -->
<div class="sticky-cta-bar" id="sticky-cta" style="display:none">
  <div class="sticky-cta-inner">
    <span class="sticky-cta-text">✦ Unlock Your Full Reading</span>
    <a href="#" class="sticky-cta-btn" onclick="openPayModal();return false;">Unlock — $7.99</a>
  </div>
</div>

<script>
// ═══════════════════════════════════════════════
// CONSTANTS
// ═══════════════════════════════════════════════
const CHECKOUT_URL = 'https://momentor.lemonsqueezy.com/checkout/buy/1350661';
const STEMS   = ['甲','乙','丙','丁','戊','己','庚','辛','壬','癸'];
const BRANCHES= ['子','丑','寅','卯','辰','巳','午','未','申','酉','戌','亥'];
const STEM_ELEMENTS   = ['Wood','Wood','Fire','Fire','Earth','Earth','Metal','Metal','Water','Water'];
const BRANCH_ELEMENTS = ['Water','Earth','Wood','Wood','Earth','Fire','Fire','Earth','Metal','Metal','Earth','Water'];
const STEM_KR   = ['갑','을','병','정','무','기','경','신','임','계'];
const BRANCH_KR = ['자','축','인','묘','진','사','오','미','신','유','술','해'];
const ELEM_KR   = {Wood:'목',Fire:'화',Earth:'토',Metal:'금',Water:'수'};
const ELEM_EN   = {Wood:'Wood',Fire:'Fire',Earth:'Earth',Metal:'Metal',Water:'Water'};
const ST_BASE_20 = [5.4055,3.8724,5.6324,4.8693,5.7133,6.0893,6.9693,7.2688,7.8543,7.9921,6.6193,7.0433];
const ST_BASE_19 = [6.11,4.6295,6.3826,5.1526,6.0942,5.6982,7.108,7.5928,8.2443,8.4102,7.8820,7.9];

// ─── State ───
let currentLang = 'en';
let selectedGender = null;
let reportData = null;

// ═══════════════════════════════════════════════
// I18N
// ═══════════════════════════════════════════════
const T = {
  'form-title':         { en:'You were already this person\nthe moment you arrived.', ko:'당신은 태어난 순간부터 이미 이 사람이었습니다.' },
  'form-subtitle':      { en:'Before you had a name for it.\nYour Four Pillars have been holding the answer.', ko:'그것을 이름 붙이기도 전에.\n사주는 처음부터 답을 갖고 있었습니다.' },
  'step1-title':        { en:'Tell me about yourself', ko:'당신에 대해 알려주세요' },
  'label-name':         { en:'Your name', ko:'이름' },
  'label-bday':         { en:'Date of birth', ko:'생년월일' },
  'label-gender':       { en:'Gender', ko:'성별' },
  'gb-m-label':         { en:'Male', ko:'남성' },
  'gb-f-label':         { en:'Female', ko:'여성' },
  'gb-o-label':         { en:'Other', ko:'기타' },
  'btn-step1-next':     { en:'Continue →', ko:'다음 →' },
  'step2-title':        { en:'Birth time (optional)', ko:'태어난 시간 (선택)' },
  'label-time':         { en:'Time of birth', ko:'출생 시각' },
  'opt-hour':           { en:'Hour', ko:'시' },
  'opt-min':            { en:'Minute', ko:'분' },
  'notime-label':       { en:"Don't know your birth time?", ko:'태어난 시간을 모르시나요?' },
  'btn-back-label':     { en:'Back', ko:'이전' },
  'btn-generate':       { en:'See My Reading →', ko:'내 사주 읽기 →' },
  'ch1-title':          { en:'Why You Are This Way', ko:'당신이 이런 사람인 이유' },
  'ch1-tagline':        { en:'You were this person from the beginning.', ko:'당신은 처음부터 이런 사람이었습니다.' },
  'ch2-title':          { en:"What You've Been Through", ko:'당신이 겪어온 것들' },
  'ch2-tagline':        { en:'The chart remembers your past.', ko:'사주는 당신의 과거를 알고 있습니다.' },
  'ch3-title':          { en:'Where You Stand Now', ko:'지금 당신이 서 있는 곳' },
  'ch3-tagline':        { en:"The energy you're moving through today.", ko:'지금 이 순간, 당신의 에너지.' },
  'ch4-title':          { en:"Where You're Going", ko:'당신 앞에 펼쳐진 것' },
  'ch4-tagline':        { en:'The story not yet written.', ko:'아직 쓰이지 않은 이야기.' },
  'acc-pillars-label':  { en:'Your Four Pillars', ko:'사주 원국' },
  'acc-elements-label': { en:'Energy Composition', ko:'오행 분포' },
  'pillar-note':        { en:'★ Day Pillar (日柱) is your core identity.', ko:'★ 일주(日柱)가 당신의 핵심입니다.' },
  'sl-origin':          { en:'Origin', ko:'탄생 이야기' },
  'sl-shadow':          { en:'Shadow', ko:'그림자' },
  'sl-invitation':      { en:'Invitation', ko:'초대' },
  'sl-strength':        { en:'Your strengths now', ko:'지금 당신의 강점' },
  'current-badge':      { en:'Current Cycle', ko:'현재 대운' },
  'today-label':        { en:"Today's Energy", ko:'오늘의 에너지' },
  'bridge-12a':         { en:'There is a reason you became this person.', ko:'당신이 이런 사람이 된 데는 이유가 있습니다.' },
  'bridge-12b':         { en:"The chart remembers every decade that made you.", ko:'사주는 당신을 만든 모든 십년을 기억합니다.' },
  'bridge12b':          { en:"The chart remembers every decade that made you.", ko:'사주는 당신을 만든 모든 십년을 기억합니다.' },
  'bridge-23a':         { en:'None of those years were accidents.', ko:'그 어떤 해도 우연이 아니었습니다.' },
  'bridge-23b':         { en:'Now look where you are.', ko:'지금 당신이 서 있는 곳을 보세요.' },
  'bridge-34a':         { en:"You know who you are. You know where you've been.", ko:'당신이 누구인지, 무엇을 겪어왔는지 알았습니다.' },
  'bridge-34b':         { en:'What comes next?', ko:'그렇다면, 다음은 무엇일까요?' },
  'conviction-closer':  { en:"The chart knew. It always knew.", ko:'사주는 알고 있었습니다. 처음부터.' },
  'paywall-hook':       { en:"The chart knew. It always knew.", ko:'사주는 알고 있었습니다. 처음부터.' },
  'paywall-sub':        { en:'What happens in the decade after next?<br>What energy is coming — and when?<br><br>The chart has never been wrong about your past.<br>It won\'t start now.', ko:'다음 10년에는 어떤 일이 기다리나요?<br>어떤 에너지가 오고 있나요?<br><br>사주는 당신의 과거에 대해 한 번도 틀린 적이 없습니다.<br>이제 와서 틀릴 리 없습니다.' },
  'paywall-fine':       { en:'One-time · No subscription · Your chart, forever.', ko:'일회 결제 · 구독 없음 · 영구 열람.' },
  'paywall-trust-text': { en:'The past was already written when you were born.<br>So is what comes next.', ko:'과거는 태어난 순간 이미 쓰여 있었습니다.<br>앞으로도 마찬가지입니다.' },
  'err-name':           { en:'Please enter your name.', ko:'이름을 입력해 주세요.' },
  'err-date':           { en:'Please enter a valid date.', ko:'올바른 날짜를 입력해 주세요.' },
  'err-gender':         { en:'Please select a gender.', ko:'성별을 선택해 주세요.' },
};

// ═══════════════════════════════════════════════
// SECURITY UTILS
// ═══════════════════════════════════════════════
function escapeHtml(str) {
  return String(str)
    .replace(/&/g,'&amp;').replace(/</g,'&lt;')
    .replace(/>/g,'&gt;').replace(/"/g,'&quot;')
    .replace(/'/g,'&#x27;');
}

async function verifyAndUnlock(orderId) {
  try {
    const resp = await fetch('/api/verify-order', {
      method: 'POST',
      body: JSON.stringify({ orderId }),
      headers: { 'Content-Type': 'application/json' }
    });
    const data = await resp.json();
    if (data && data.ok) {
      sessionStorage.setItem('momentor_token', data.token || orderId);
      if (reportData) {
        reportData.unlocked = true;
        renderReport(reportData);
      }
      return true;
    }
  } catch (e) {
    // Vercel function not available (local dev fallback)
    console.warn('verify-order endpoint not available:', e.message);
  }
  return false;
}

function isUnlocked() {
  return !!sessionStorage.getItem('momentor_token');
}

function setLang(lang) {
  currentLang = lang;
  document.documentElement.lang = lang;
  document.querySelectorAll('.lang-btn').forEach(b => b.classList.toggle('active', b.textContent.trim() === lang.toUpperCase()));
  // update static strings
  Object.keys(T).forEach(id => {
    const el = document.getElementById(id);
    if (el && T[id][lang]) {
      if (el.tagName === 'INPUT' || el.tagName === 'OPTION') el.placeholder = T[id][lang];
      else el.innerHTML = T[id][lang];
    }
  });
  // re-render dynamic content if report exists
  if (reportData) renderReport(reportData);
}

// ═══════════════════════════════════════════════
// CALCULATION FUNCTIONS
// ═══════════════════════════════════════════════
function calcSolarTermDate(year, termIndex) {
  const C = (year % 100 < 20) ? ST_BASE_19[termIndex] : ST_BASE_20[termIndex];
  const Y = year % 100;
  return Math.trunc(Y * 0.2422 + C) - Math.trunc(Y / 4);
}

function getYearPillar(year, month, day) {
  const lichunDay = calcSolarTermDate(year, 1);
  const effectiveYear = (month < 2 || (month === 2 && day < lichunDay)) ? year - 1 : year;
  const stemIdx = ((effectiveYear - 4) % 10 + 10) % 10;
  const branchIdx = ((effectiveYear - 4) % 12 + 12) % 12;
  return { stem: STEMS[stemIdx], branch: BRANCHES[branchIdx], stemKr: STEM_KR[stemIdx], branchKr: BRANCH_KR[branchIdx], element: STEM_ELEMENTS[stemIdx], branchElement: BRANCH_ELEMENTS[branchIdx], stemIdx, branchIdx };
}

function getMonthPillar(year, month, day) {
  const termDay = calcSolarTermDate(year, month - 1);
  const monthIndex = (day < termDay) ? month - 2 : month - 1;
  const adjustedMonth = ((monthIndex % 12) + 12) % 12;
  const yearStemIdx = ((year - 4) % 10 + 10) % 10;
  const monthStemStart = (yearStemIdx % 5) * 2;
  const stemIdx = (monthStemStart + adjustedMonth) % 10;
  const branchIdx = (adjustedMonth + 2) % 12;
  return { stem: STEMS[stemIdx], branch: BRANCHES[branchIdx], stemKr: STEM_KR[stemIdx], branchKr: BRANCH_KR[branchIdx], element: STEM_ELEMENTS[stemIdx], branchElement: BRANCH_ELEMENTS[branchIdx], stemIdx, branchIdx };
}

function getDayPillar(year, month, day) {
  function toJulian(y, m, d) {
    if (m <= 2) { y--; m += 12; }
    const A = Math.floor(y / 100);
    const B = 2 - A + Math.floor(A / 4);
    return Math.floor(365.25 * (y + 4716)) + Math.floor(30.6001 * (m + 1)) + d + B - 1524;
  }
  const jd = toJulian(year, month, day);
  const stemIdx = ((jd - 11) % 10 + 10) % 10;
  const branchIdx = ((jd - 11) % 12 + 12) % 12;
  return { stem: STEMS[stemIdx], branch: BRANCHES[branchIdx], stemKr: STEM_KR[stemIdx], branchKr: BRANCH_KR[branchIdx], element: STEM_ELEMENTS[stemIdx], branchElement: BRANCH_ELEMENTS[branchIdx], stemIdx, branchIdx };
}

function getHourPillar(dayStemIdx, hour) {
  const branchIdx = hour === 23 ? 0 : Math.floor((hour + 1) / 2) % 12;
  const stemStart = (dayStemIdx % 5) * 2;
  const stemIdx = (stemStart + branchIdx) % 10;
  return { stem: STEMS[stemIdx], branch: BRANCHES[branchIdx], stemKr: STEM_KR[stemIdx], branchKr: BRANCH_KR[branchIdx], element: STEM_ELEMENTS[stemIdx], branchElement: BRANCH_ELEMENTS[branchIdx], stemIdx, branchIdx };
}

function getSolarTermDay(year, month0) {
  // month0: 0=Jan(小寒), 1=Feb(立春), 2=Mar(驚蟄), ..., 11=Dec(大雪)
  const Y = year % 100;
  const base = year >= 2000 ? ST_BASE_20[month0] : ST_BASE_19[month0];
  return Math.floor(Y * 0.2422 + base) - Math.floor(Y / 4);
}

function calcDaeunStartAge(year, month, day, monthPillar, forward) {
  const m0 = month - 1;
  let termYear = year, termMonth0 = m0;
  if (forward) {
    const termDay = getSolarTermDay(year, m0);
    if (day >= termDay) {
      termMonth0 = (m0 + 1) % 12;
      termYear = m0 === 11 ? year + 1 : year;
    }
    const targetDay = getSolarTermDay(termYear, termMonth0);
    const birth = new Date(year, month - 1, day);
    const term  = new Date(termYear, termMonth0, targetDay);
    const diff  = (term - birth) / 86400000;
    return Math.max(1, Math.round(diff / 3));
  } else {
    const termDay = getSolarTermDay(year, m0);
    if (day < termDay) {
      termMonth0 = (m0 - 1 + 12) % 12;
      termYear = m0 === 0 ? year - 1 : year;
    }
    const targetDay = getSolarTermDay(termYear, termMonth0);
    const birth = new Date(year, month - 1, day);
    const term  = new Date(termYear, termMonth0, targetDay);
    const diff  = Math.abs(birth - term) / 86400000;
    return Math.max(1, Math.round(diff / 3));
  }
}

function renderDaeunProgress(startAge, currentAge) {
  const elapsed = Math.min(Math.max(currentAge - startAge, 0), 10);
  const pct = (elapsed / 10 * 100).toFixed(0);
  return `
    <div class="daeun-progress">
      <div class="progress-bar"><div class="progress-fill" style="width:${pct}%"></div></div>
      <span class="progress-meta">${elapsed}yr in · ${10 - elapsed}yr remaining</span>
    </div>
  `;
}

function calcFourPillars(year, month, day, hour, gender, noTime) {
  const yearPillar  = getYearPillar(year, month, day);
  const monthPillar = getMonthPillar(year, month, day);
  const dayPillar   = getDayPillar(year, month, day);
  const hourPillar  = noTime ? null : getHourPillar(dayPillar.stemIdx, hour);

  const elements = { Wood:0, Fire:0, Earth:0, Metal:0, Water:0 };
  [yearPillar, monthPillar, dayPillar, hourPillar].forEach(p => {
    if (!p) return;
    elements[p.element]++;
    elements[p.branchElement]++;
  });

  const yearYang = yearPillar.stemIdx % 2 === 0;
  const genderCalc = gender === 'O' ? 'F' : gender; // Other → Yin (feminine polarity)
  const forward  = (yearYang && genderCalc === 'M') || (!yearYang && genderCalc === 'F');

  const currentYear = new Date().getFullYear();
  const personAge   = currentYear - year;

  // T1-C: Real 起運 calculation
  const startAge = calcDaeunStartAge(year, month, day, monthPillar, forward);

  const daeun = [];
  for (let i = 0; i < 9; i++) {
    const age = startAge + i * 10;
    const startYear = year + age;
    const endYear   = startYear + 9;
    const mIdx = ((monthPillar.branchIdx + (forward ? i+1 : -(i+1))) % 12 + 12) % 12;
    const sIdx = ((monthPillar.stemIdx  + (forward ? i+1 : -(i+1))) % 10 + 10) % 10;
    daeun.push({
      age, startYear, endYear,
      startAge: age, endAge: age + 9,
      stem: STEMS[sIdx], branch: BRANCHES[mIdx],
      stemKr: STEM_KR[sIdx], branchKr: BRANCH_KR[mIdx],
      element: STEM_ELEMENTS[sIdx], branchElement: BRANCH_ELEMENTS[mIdx],
      stemIdx: sIdx, branchIdx: mIdx,
      isCurrent: personAge >= age && personAge < age + 10,
      isPast: personAge >= age + 10,
      isFuture: personAge < age,
    });
  }

  return { yearPillar, monthPillar, dayPillar, hourPillar, elements, daeun, noTime };
}

// ═══════════════════════════════════════════════
// PILLAR NARRATIVES — 60 일주 카피 (Mira)
// ═══════════════════════════════════════════════
const PILLAR_NARRATIVES = {
"甲子": { hook: "You came into this world with a destination already in mind — and the water to carry you there.", origin: "甲木 meets 子Water: a tree rooted in an underground spring. The river doesn't fight the tree's direction — it feeds it, quietly, from below. Before you could name what drove you, you were already moving. Not scrambling — flowing toward something. The ambition was never loud. But it was always there, always deep, always cold-clear as winter water finding the path of least resistance toward the sea.", shadow: "The spring feeds the tree, but sometimes the roots drink so deep that the surface dries out. You can be consumed by the direction without remembering to surface, to rest, to let someone actually reach you rather than just watch you move.", invitation: "The water knows where it's going. What would happen if you let someone travel with you?", hookKo: "당신은 이미 목적지를 마음에 품고 태어났습니다 — 그리고 그곳까지 데려다줄 물도 함께.", originKo: "甲木과 子水: 지하 샘에 뿌리내린 나무. 강은 나무의 방향과 싸우지 않습니다 — 아래에서, 조용히, 그것을 먹입니다. 이름 붙이기도 전에 당신은 이미 움직이고 있었습니다.", shadowKo: "샘은 나무를 먹이지만, 때로 뿌리가 너무 깊이 마시면 표면이 건조해집니다.", invitationKo: "물은 어디로 가는지 알고 있습니다. 누군가가 함께 여행하도록 허락한다면 어떻게 될까요?" },
"甲寅": { hook: "You've never needed permission to begin. The question was always just — when, not whether.", origin: "Two woods in the same pillar: the tree planted in a forest of its own making. 甲Wood in 寅Wood ground — primal will. You were the child who decided something and could not be reasoned out of it. Not stubbornness — orientation. The compass was set before anyone thought to ask where you were going.", shadow: "The double wood burns hot and climbs fast — but there are no other elements to tell it when to stop. You've overextended. You've committed to directions you couldn't unmake.", invitation: "The forest doesn't need another tree. What does it need? What do you need?", hookKo: "당신은 시작하기 위해 허락이 필요했던 적이 없습니다.", originKo: "두 개의 목(木)이 같은 기둥에: 자신이 만든 숲에 심어진 나무. 원초적인 의지입니다.", shadowKo: "이중 목은 뜨겁게 타오르고 빠르게 올라갑니다 — 하지만 언제 멈춰야 할지 알려줄 다른 원소가 없습니다.", invitationKo: "숲에 또 다른 나무가 필요하지 않습니다. 무엇이 필요한가요?" },
"甲辰": { hook: "You carry authority you never asked for — and have spent years figuring out what to do with it.", origin: "甲Wood planted in 辰Earth — the Dragon's soil. A tree planted in dragon ground doesn't just grow — it becomes something that reorganizes the landscape. There is a gravitational weight to you that appeared early. In school, in groups, in rooms — things arranged around your presence before you spoke a word.", shadow: "Power without permission creates a particular kind of loneliness. People followed you; they didn't always choose you.", invitation: "The dragon's earth transforms everything it holds. What is it time to let change?", hookKo: "당신은 요청하지 않은 권위를 갖고 있습니다.", originKo: "甲木과 辰土 — 용의 땅에 심어진 나무. 용의 땅에 심어진 나무는 단순히 자라는 것이 아닙니다 — 풍경을 재편하는 무언가가 됩니다.", shadowKo: "허락 없는 권력은 특별한 종류의 외로움을 만듭니다.", invitationKo: "용의 땅은 그것이 담고 있는 모든 것을 변환합니다. 이제 무엇을 변하게 할 시간인가요?" },
"甲午": { hook: "There's a fire in you that other people mistake for impatience. They've never understood what it's actually pushing toward.", origin: "甲Wood above 午Fire: the tree that catches sunlight and runs with it. Wood feeds fire; fire accelerates the wood's energy upward. You've always moved faster than the plan, felt things more intensely than the occasion called for, been ten steps ahead.", shadow: "Fire and wood together, unchecked — this burns. There's a version of you that has run straight into walls at full speed because the momentum was too good to question.", invitation: "The noon sun burns brightest — but even it sets. What does the fire look like when it finally slows down?", hookKo: "당신 안에는 다른 사람들이 조급함으로 착각하는 불이 있습니다.", originKo: "甲木과 午火: 햇빛을 잡아 달려가는 나무. 목은 화를 먹이고, 화는 목의 에너지를 위로 가속합니다.", shadowKo: "제어되지 않은 화와 목 — 이것은 불탑니다.", invitationKo: "정오의 태양이 가장 밝게 타오릅니다 — 하지만 그것도 집니다." },
"甲申": { hook: "You've been sharpened by things that were supposed to break you. They didn't. You noticed.", origin: "甲Wood meeting 申Metal: the tree and the axe in the same body. 申Metal brings precision, systems, the ability to see what's unnecessary and release it. The result is a person shaped by pressure into something specific — someone who came out of difficult seasons with an edge others don't have.", shadow: "The sharpness in you, when turned inward, is unkind. You've been harder on yourself than any outside force — and convinced yourself that's discipline.", invitation: "The axe and the tree made each other. What were you made to build?", hookKo: "당신은 당신을 부수기로 되어 있었던 것들에 의해 다듬어졌습니다.", originKo: "甲木과 申金: 같은 몸 안의 나무와 도끼. 결과는 어려운 계절을 통해 날을 가진 채로 나온 사람입니다.", shadowKo: "당신 안의 예리함은 내면으로 향할 때 친절하지 않습니다.", invitationKo: "도끼와 나무는 서로를 만들었습니다. 당신은 무엇을 만들기 위해 만들어졌나요?" },
"甲戌": { hook: "You are someone people think of years later — not because of what you said, but because of what you held.", origin: "甲Wood above 戌Earth: the tree at dusk, rooted in the fire-keeper's ground. 戌 holds the memory of the day's heat. A 甲木 planted here grows with unusual rootedness. Less upward rush, more depth. The direction is real, but something in you also knows how to stay.", shadow: "The fire-keeper can become the one who never leaves the fire. 甲戌 sometimes sacrifices movement for what it's protecting — staying too long in places, relationships, roles that no longer need tending.", invitation: "What you've been guarding is safe now. What does it look like to move with that instead of staying to protect it?", hookKo: "당신은 사람들이 수년 후에 떠올리는 사람입니다.", originKo: "甲木과 戌土: 황혼에, 불을 지키는 자의 땅에 뿌리내린 나무.", shadowKo: "불을 지키는 자는 불 곁을 결코 떠나지 않는 자가 될 수 있습니다.", invitationKo: "당신이 지키고 있던 것은 이제 안전합니다." },
"乙丑": { hook: "You've outlasted everyone who underestimated you. Not by force — by patience so deep it looks like peace.", origin: "乙Wood in 丑Earth: the vine taking hold in frozen winter ground. Most things die in this soil. The vine doesn't. It finds the smallest crack and roots there, quietly, waiting for the season to change.", shadow: "The vine in winter ground can wait so long that it forgets to bloom when spring finally arrives. 乙丑 sometimes sacrifices spontaneity for safety.", invitation: "The winter is over. What are you still waiting for permission to grow toward?", hookKo: "당신을 과소평가한 모든 사람을 살아남았습니다.", originKo: "乙木과 丑土: 얼어붙은 겨울 땅에 뿌리내리는 덩굴. 대부분의 것들이 이 토양에서 죽습니다. 덩굴은 그러지 않습니다.", shadowKo: "겨울 땅의 덩굴은 너무 오래 기다려서 봄이 왔을 때 꽃 피우는 것을 잊을 수 있습니다.", invitationKo: "겨울이 끝났습니다. 성장하도록 허락받기를 아직도 기다리고 있는 것이 무엇인가요?" },
"乙卯": { hook: "You were built for elegance, and the world kept asking for something harder. You found a way to give both.", origin: "乙Wood in 卯Wood: pure vine energy, doubled. This combination is the most aesthetically attuned: you have always felt the texture of things, the beauty in how something is said rather than just what is said.", shadow: "Too much wood and the vine can overgrow — spreading everywhere, attached to everything, unable to say where it begins and where the structure ends.", invitation: "The vine is most beautiful when it knows which wall it's climbing. What is your wall?", hookKo: "당신은 우아함을 위해 만들어졌고, 세상은 계속 더 단단한 것을 요구했습니다.", originKo: "乙木과 卯木: 순수한 덩굴 에너지, 두 배로. 이 조합은 가장 미적으로 조율된 것입니다.", shadowKo: "목이 너무 많으면 덩굴이 경계를 넘어 자랄 수 있습니다.", invitationKo: "덩굴은 어떤 벽을 올라가는지 알 때 가장 아름답습니다." },
"乙巳": { hook: "You've always known things before they happened. Not because you're psychic — because you're watching everything.", origin: "乙Wood above 巳Fire: the vine that runs toward the light. 巳 is intelligent fire that burns with direction and calculation. You have always read the room three moves ahead. The thing people call intuition in you is actually attention.", shadow: "The vine that grows only toward light can become dependent on a particular source of it. When that light disappears, the disorientation is profound.", invitation: "The snake's fire burns in a particular direction. What does your intelligence want to illuminate?", hookKo: "당신은 항상 일어나기 전에 일들을 알았습니다.", originKo: "乙木과 巳火: 빛을 향해 달리는 덩굴. 巳는 지능적인 불입니다.", shadowKo: "빛을 향해서만 자라는 덩굴은 특정 빛의 원천에 의존하게 될 수 있습니다.", invitationKo: "뱀의 불은 특별한 방향으로 타오릅니다. 당신의 지능은 무엇을 밝히고 싶어하나요?" },
"乙未": { hook: "People trust you with things they've never told anyone. That's not accident — something about you makes secrets feel safe.", origin: "乙Wood above 未Earth: the vine in the afternoon garden. 未 is earth warmed all day — the most receptive, creative, and emotionally rich. You carry a quality of emotional temperature that other people recognize instinctively.", shadow: "The vine in warm earth can become so comfortable that it stops moving. Warmth used to stay rather than to grow.", invitation: "The garden you've tended is beautiful. Is there somewhere wilder you've been curious about?", hookKo: "사람들은 누구에게도 말한 적 없는 것들을 당신에게 맡깁니다.", originKo: "乙木과 未土: 오후 정원의 덩굴. 따뜻하고 수용적인 未土.", shadowKo: "따뜻한 땅의 덩굴은 너무 편안해져서 움직이기를 멈출 수 있습니다.", invitationKo: "당신이 가꿔온 정원은 아름답습니다. 더 거칠고 궁금했던 곳이 있나요?" },
"乙酉": { hook: "You are precise in a way that most people can't place — you edit the room you're in, you edit yourself, before anyone notices.", origin: "乙Wood above 酉Metal: the vine shaped by the pruning blade. You were formed by contact with high standards. The vine grew in the shape the blade allowed — not smaller, but more intentional.", shadow: "A vine pruned too often stops volunteering growth. 乙酉 can become overly self-editing — pre-rejecting ideas before they're half-formed.", invitation: "The most beautiful gardens have one wild corner. What are you not allowing to grow freely?", hookKo: "당신은 대부분의 사람들이 파악할 수 없는 방식으로 정밀합니다.", originKo: "乙木과 酉金: 가지치기 날에 의해 다듬어진 덩굴.", shadowKo: "너무 자주 가지치기 된 덩굴은 자발적 성장을 멈춥니다.", invitationKo: "가장 아름다운 정원에는 거친 구석이 하나 있습니다. 자유롭게 자라도록 허락하지 않고 있는 것은 무엇인가요?" },
"乙亥": { hook: "You've lived in the undercurrent of things — the meaning beneath the meeting, the feeling beneath the words — your entire life.", origin: "乙Wood above 亥Water: the vine floating on deep water, rooted in mystery. You've always inhabited the space between things: between what's said and what's meant, between who someone is and who they could become.", shadow: "Water this deep can disorient. 乙亥 sometimes loses the thread between the inner world and the practical one.", invitation: "The depth you navigate is real. Who else knows how to read these waters?", hookKo: "당신은 평생 사물의 저류에 살아왔습니다.", originKo: "乙木과 亥水: 깊은 물 위에 떠 있는, 신비에 뿌리내린 덩굴.", shadowKo: "이처럼 깊은 물은 방향감각을 잃게 할 수 있습니다.", invitationKo: "당신이 항해하는 깊이는 실재합니다. 이 물을 읽는 방법을 아는 다른 사람은 누구인가요?" },
"丙子": { hook: "You carry a warmth that has survived cold that would have extinguished most people. That's not resilience — that's physics.", origin: "丙Fire above 子Water: the sun reflected in midnight water. You are bright, but underneath there are currents that the brightness doesn't reveal. 子 is midnight potential: everything gathered, nothing yet released.", shadow: "丙子 can illuminate without revealing, shine without showing. People are warmed by you without understanding you, and that gap becomes a loneliness that is very hard to name.", invitation: "The midnight water knows what the noon sun doesn't. What do you know that you haven't said yet?", hookKo: "당신은 대부분의 사람들을 꺼뜨렸을 추위를 살아남은 따뜻함을 지니고 있습니다.", originKo: "丙火와 子水: 자정 물에 반영된 태양. 당신은 밝지만, 아래에는 밝음이 드러내지 않는 조류가 있습니다.", shadowKo: "丙子는 드러내지 않고 빛을 발할 수 있습니다. 사람들은 당신을 이해하지 못한 채 따뜻함을 받습니다.", invitationKo: "자정의 물은 정오의 태양이 모르는 것을 알고 있습니다." },
"丙寅": { hook: "You were the one who moved first. Not because you were the most prepared — because you couldn't wait.", origin: "丙Fire above 寅Wood: the rising sun above the tiger's mountain. 寅 is the hour of the tiger — action before thought, instinct that has never needed to justify itself. You've started things. You've led. You've been the one who walked into the dark with a torch.", shadow: "The fire that burns twice as fast gives twice as much light — and exhausts its fuel in half the time.", invitation: "What would it look like to be both the torch and the one who gets to rest?", hookKo: "당신은 먼저 움직인 사람이었습니다.", originKo: "丙火와 寅木: 호랑이의 산 위의 떠오르는 태양.", shadowKo: "두 배로 빠르게 타오르는 불은 두 배의 빛을 주고 절반의 시간에 연료를 소진합니다.", invitationKo: "횃불이면서 동시에 쉴 수 있는 사람이 되는 것은 어떤 모습일까요?" },
"丙辰": { hook: "You've transformed every room you've been long enough in. Sometimes you knew it. Sometimes you didn't.", origin: "丙Fire above 辰Earth: the sun above the dragon's transforming ground. You have a quality of catalysis: things become something different for having been near you. Conversations go somewhere they wouldn't have.", shadow: "The transformer doesn't always get to experience the result of its transformation. 丙辰 moves things forward — and sometimes moves on before seeing what it made.", invitation: "You've changed the shape of things for a long time. What has changed the shape of you?", hookKo: "당신은 충분히 오래 머문 모든 방을 변환시켰습니다.", originKo: "丙火와 辰土: 용의 변환하는 땅 위의 태양. 촉매의 자질.", shadowKo: "변환자는 항상 자신의 변환 결과를 경험하지 못합니다.", invitationKo: "오랫동안 사물의 형태를 바꿔왔습니다. 무엇이 당신의 형태를 바꿨나요?" },
"丙午": { hook: "When you walk in, something shifts. Not because you try — because you can't not.", origin: "丙Fire above 午Fire: the sun at its absolute noon, doubled. 丙午 is the combination that doesn't do subtle. You arrived in the world at full volume. People orbit you. That's not metaphor.", shadow: "Maximum light creates maximum shadow. There's a loneliness inside the sun: nothing can look directly at you for long.", invitation: "At the height of noon, the sun finally stops climbing. What does stillness feel like for you?", hookKo: "당신이 들어오면 무언가가 바뀝니다.", originKo: "丙火와 午火: 두 배가 된 절정의 정오. 丙午는 섬세함을 하지 않는 조합입니다.", shadowKo: "최대 빛은 최대 그림자를 만듭니다. 태양 안에는 외로움이 있습니다.", invitationKo: "정오의 정점에서 태양은 마침내 올라가기를 멈춥니다. 당신에게 고요함은 어떤 느낌인가요?" },
"丙申": { hook: "You are warm and exact — a combination that takes people completely off guard.", origin: "丙Fire above 申Metal: the sun above the refining furnace. When the sun's heat meets metal precision, the result is unusual: warmth that has standards, generosity that has limits.", shadow: "Metal cools what it touches, even in the fire. The warmth is real, but the precision around it can be experienced as judgment.", invitation: "The furnace refines what enters it. What are you in the process of refining right now?", hookKo: "당신은 따뜻하고 정밀합니다.", originKo: "丙火와 申金: 정련 용광로 위의 태양. 기준이 있는 따뜻함.", shadowKo: "금속은 불 안에서도 그것이 닿는 것을 식힙니다.", invitationKo: "용광로는 그것에 들어오는 것을 정제합니다. 지금 무엇을 정제하는 과정 중에 있나요?" },
"丙戌": { hook: "People have always brought you their heaviest things. Not because you asked — because you were already carrying your own, and still standing.", origin: "丙Fire above 戌Earth: the sun at dusk, warming the earth that guards the day's memory. You have lit candles for people at their darkest hours, held steady when others panicked.", shadow: "The sun doesn't go out in 丙戌 — but it gets heavy. 丙戌 sometimes carries wounds that it cannot express because the warmth must be maintained.", invitation: "You've kept the light going for a long time. What would it feel like to let someone else hold the torch tonight?", hookKo: "사람들은 항상 가장 무거운 것들을 당신에게 가져왔습니다.", originKo: "丙火와 戌土: 황혼에, 낮의 기억을 지키는 땅을 따뜻하게 하는 태양.", shadowKo: "丙戌에서 태양은 꺼지지 않습니다 — 하지만 무거워집니다.", invitationKo: "오랫동안 빛을 지속시켜왔습니다. 오늘 밤 누군가 다른 사람이 횃불을 잡게 한다면 어떤 느낌일까요?" },
"丁丑": { hook: "You've kept your flame burning through winters that were meant to put it out. That takes something most people don't have.", origin: "丁Fire above 丑Earth: a candle burning in frozen ground. You have maintained your warmth under conditions that were not designed for warmth — not by ignoring the cold, but by burning more precisely.", shadow: "A flame in frozen ground gives everything to surviving — and may have nothing left for thriving.", invitation: "The winter you survived is the proof. The spring is asking: what do you want to grow?", hookKo: "당신은 꺼뜨리기 위해 의도된 겨울들을 통해 불꽃을 계속 태웠습니다.", originKo: "丁火와 丑土: 얼어붙은 땅에서 타오르는 촛불.", shadowKo: "얼어붙은 땅의 불꽃은 살아남기 위해 모든 것을 줍니다 — 번성할 것이 남지 않을 수 있습니다.", invitationKo: "살아남은 겨울이 증거입니다. 봄이 묻고 있습니다: 무엇을 기르고 싶나요?" },
"丁卯": { hook: "You are gentler than you look and sharper than you seem. People rarely guess the combination until it's too late.", origin: "丁Fire above 卯Wood: the candle held in an open hand in spring. You move through the world with a quality of grace that feels effortless from outside. From inside, you know the attention it requires.", shadow: "Wood feeds fire, but wood also burns. 丁卯 can give away warmth faster than it regenerates.", invitation: "Spring is the season of emergence. What is ready to come forward in you?", hookKo: "당신은 보기보다 더 부드럽고 보이는 것보다 더 예리합니다.", originKo: "丁火와 卯木: 봄에 열린 손에 들린 촛불.", shadowKo: "목은 불을 먹이지만, 목도 탑니다. 丁卯은 재생되는 것보다 더 빨리 따뜻함을 줄 수 있습니다.", invitationKo: "봄은 꽃만을 위한 출현의 계절이 아닙니다. 당신 안에서 무엇이 앞으로 나올 준비가 되어 있나요?" },
"丁巳": { hook: "There's a version of your life where you trust the intelligence you carry. You're starting to live it.", origin: "丁Fire above 巳Fire: two fires — the intimate candle above the serpent's directed flame. Your care has always had architecture. The conversations you've ignited weren't accidental.", shadow: "Two fires together can be very consuming. 丁巳 sometimes burns so intentionally toward goals that it forgets that warmth, at its best, is not a tool.", invitation: "The serpent knows exactly where it's going. Does the candle know what it wants to illuminate?", hookKo: "당신이 지니고 있는 지능을 신뢰하는 삶의 버전이 있습니다.", originKo: "丁火와 巳火: 다른 성격의 두 불.", shadowKo: "두 불이 함께하면 매우 소비적일 수 있습니다.", invitationKo: "뱀은 정확히 어디로 가는지 알고 있습니다. 촛불은 무엇을 밝히고 싶은지 알고 있나요?" },
"丁未": { hook: "You hold the warmth of things long after they've passed. That's not sentimentality — that's a different kind of knowing.", origin: "丁Fire above 未Earth: the candle in the afternoon garden. 丁Fire here doesn't burn and release — it burns and accumulates, carrying the heat of past moments into present ones. You remember things that other people have forgotten.", shadow: "The earth that holds everything can also hold what should be released. 丁未 sometimes carries old warmth and old wounds with equal tenderness.", invitation: "The garden holds every season that has passed through it. Which one are you still living in?", hookKo: "당신은 지나간 것들의 따뜻함을 오래 간직합니다.", originKo: "丁火와 未土: 오후 정원의 촛불. 丁火는 태우고 방출하지 않습니다 — 쌓습니다.", shadowKo: "모든 것을 담고 있는 땅은 방출해야 할 것도 담고 있을 수 있습니다.", invitationKo: "정원은 그것을 통과한 모든 계절을 담고 있습니다. 당신은 아직 어느 계절에 살고 있나요?" },
"丁酉": { hook: "You see the flaw in the beautiful thing — and you love it anyway. That's rarer than it sounds.", origin: "丁Fire above 酉Metal: the candlelight refracted through crystal. You have an extraordinary sensory precision: you feel the quality of things, the rightness and wrongness of them, in ways that don't require explanation.", shadow: "The crystal that refracts everything also fractures in the wrong light. Standards and sorrow live very close together here.", invitation: "The gem doesn't need to be flawless to be precious. Do you know that in your own case?", hookKo: "아름다운 것의 결함을 보고 그럼에도 불구하고 사랑합니다.", originKo: "丁火와 酉金: 수정을 통해 굴절된 촛불.", shadowKo: "丁酉는 선물과 매우 가까운 상처-민감성을 지닙니다.", invitationKo: "보석은 귀하기 위해 흠 없을 필요가 없습니다. 당신 자신의 경우에 그것을 알고 있나요?" },
"丁亥": { hook: "You've been swimming in depths that most people can't see from the surface. Not drowning — navigating.", origin: "丁Fire above 亥Water: the candle flame on the surface of the deep ocean. A candle here burns with unusual wisdom, because it has been formed by the impossible: maintaining warmth and light in an element that should extinguish it.", shadow: "The flame on the ocean is extraordinary — and precarious. 丁亥 can be destabilized by emotional storms that others barely register.", invitation: "The flame on the water burns, against all reason. What in your life deserves that same impossible commitment?", hookKo: "대부분의 사람들이 표면에서 볼 수 없는 깊이에서 헤엄쳐왔습니다.", originKo: "丁火와 亥水: 깊은 대양 표면의 촛불.", shadowKo: "대양 위의 불꽃은 특별하고 불안정합니다.", invitationKo: "물 위의 불꽃은 모든 이성에 반하여 타오릅니다." },
"戊子": { hook: "There's a stillness in you that people mistake for contentment. Only you know what it's actually holding.", origin: "戊Earth above 子Water: the mountain with an underground spring. On the surface — unmovable, steady. Below — a current of water in constant motion. The mountain absorbs the water; the water influences the mountain — invisibly, over time.", shadow: "Underground water can erode what seems permanent. The collapse, when it comes, surprises even the mountain itself.", invitation: "The mountain keeps its underground rivers private. What would happen if you let someone hear the water?", hookKo: "당신 안의 고요함을 사람들은 만족으로 착각합니다.", originKo: "戊土와 子水: 지하 샘이 있는 산. 표면은 움직임 없지만 아래에는 끊임없이 움직이는 물의 흐름이 있습니다.", shadowKo: "지하수는 영구적으로 보이는 것을 침식할 수 있습니다.", invitationKo: "산은 지하 강을 비밀로 유지합니다. 누군가가 물을 들을 수 있도록 허락하면 어떻게 될까요?" },
"戊寅": { hook: "You've protected people who didn't know they needed protecting. That's a particular kind of grace.", origin: "戊Earth above 寅Wood: the mountain where the tiger was born. You have a quality of readiness that others feel instinctively: something in you is always prepared, always watching, always positioned to meet what might come.", shadow: "The guardian who is always ready can forget what it's like to be unguarded. 戊寅 sometimes becomes so focused on protection that it misses the experience it's protecting.", invitation: "The tiger rests between hunts. What does rest look like for someone built like you?", hookKo: "필요로 한다는 것을 몰랐던 사람들을 보호해왔습니다.", originKo: "戊土와 寅木: 호랑이가 태어난 산.", shadowKo: "항상 준비된 수호자는 무방비 상태가 어떤 것인지 잊을 수 있습니다.", invitationKo: "호랑이는 사냥 사이에 쉽니다. 당신처럼 만들어진 누군가에게 휴식은 어떤 모습인가요?" },
"戊辰": { hook: "You are one of the most powerful things in any room, and you dress it in ordinary clothes.", origin: "戊Earth above 辰Earth: mountain upon transforming earth. You carry both: the profound stillness of the mountain and the capacity for dramatic transformation underneath. When you do move, everything moves with you.", shadow: "Double earth can become unmovable to the point of rigidity. 戊辰 sometimes protects stability so fiercely that necessary change is treated as threat.", invitation: "You contain the earthquake. When was the last time you let yourself shake?", hookKo: "당신은 어떤 방에서든 가장 강력한 것들 중 하나이고, 그것을 평범한 옷으로 입습니다.", originKo: "戊土와 辰土: 변환하는 땅 위의 산.", shadowKo: "이중 흙은 경직성의 지점까지 움직이지 않게 될 수 있습니다.", invitationKo: "당신은 지진을 담고 있습니다. 마지막으로 자신이 흔들리도록 한 것이 언제였나요?" },
"戊午": { hook: "You burn steady when everything else is chaos. People have been counting on that their whole lives without telling you.", origin: "戊Earth above 午Fire: the mountain warmed by the noon sun. You have the steadiness of the mountain with the warmth of the fire. Your presence itself reorganizes panic into something manageable.", shadow: "The mountain absorbs the noon heat and holds it — heat that has nowhere to go accumulates. 戊午 can carry unprocessed intensity.", invitation: "You've been steady for so many people. What does it feel like when you let yourself burn freely?", hookKo: "모든 것이 혼란일 때 당신은 꾸준히 타오릅니다.", originKo: "戊土와 午火: 정오의 태양으로 따뜻해진 산.", shadowKo: "갈 곳 없는 열기는 쌓입니다. 戊午는 처리되지 않은 강도를 지닐 수 있습니다.", invitationKo: "많은 사람들을 위해 꾸준했습니다. 자유롭게 타오르도록 자신을 놓아줄 때 어떤 느낌인가요?" },
"戊申": { hook: "You've carved something precise out of something enormous. That takes patience of a kind most people haven't needed.", origin: "戊Earth above 申Metal: the mountain that contains veins of metal — enormous potential that requires specific conditions and time. You have been shaped by systems, by structure, by forms of discipline that felt limiting and turned out to be liberating.", shadow: "Metal inside stone requires a force to emerge that can be mistaken for violence. 戊申 sometimes uses precision and control as distance.", invitation: "The mountain holds the ore. Who has the patience to help you bring it out?", hookKo: "방대한 것에서 정밀한 것을 조각해냈습니다.", originKo: "戊土와 申金: 금속 맥이 있는 산.", shadowKo: "戊申은 때로 정밀함과 통제를 거리로 사용합니다.", invitationKo: "산이 광석을 담고 있습니다. 그것을 꺼내는 것을 도울 인내심이 있는 사람은 누구인가요?" },
"戊戌": { hook: "You've been the ground beneath things. The invisible foundation. The thing that made other things possible.", origin: "戊Earth above 戌Earth: double earth, both guarding fire within. There is a devotion in you that runs deeper than most people's loyalty — a commitment not to individuals or projects, but to what should be true.", shadow: "The mountain that guards its fire against everything guards it against the things it needs too. 戊戌 can become isolated in its groundedness.", invitation: "The deepest fire needs air to keep burning. What are you letting in?", hookKo: "당신은 사물 아래의 땅이었습니다. 보이지 않는 기반.", originKo: "戊土와 戌土: 이중 흙, 둘 다 안에 불을 지키고 있습니다.", shadowKo: "모든 것에 반해 불을 지키는 산은 필요한 것들에 대해서도 지킵니다.", invitationKo: "가장 깊은 불은 계속 타오르기 위해 공기가 필요합니다. 무엇을 들여보내고 있나요?" },
"己丑": { hook: "You've built things quietly, over a very long time, that people will be standing on long after you're gone.", origin: "己Earth above 丑Earth: double earth in the dead of winter. 己丑 is the patience of seeds — the work that looks like nothing and is everything. You plant, you tend, you wait.", shadow: "Winter earth can become so patient that it forgets spring is an option. 己丑 sometimes chooses difficulty because it's familiar.", invitation: "The ground has been keeping things alive all winter. What does it want to grow this year?", hookKo: "아주 오랜 시간 동안 조용히 무언가를 쌓아왔습니다.", originKo: "己土와 丑土: 한겨울의 이중 흙.", shadowKo: "겨울 흙은 너무 인내심이 생겨서 봄이 선택지임을 잊을 수 있습니다.", invitationKo: "땅은 겨울 내내 것들을 살아있게 유지했습니다. 올해 무엇을 기르고 싶나요?" },
"己卯": { hook: "You make the complicated look easy and the easy look meaningful. That's a specific kind of genius.", origin: "己Earth above 卯Wood: the garden in full spring. You've been creating conditions for other people's success for so long that you've become invisible to the outcome.", shadow: "The spring garden gives everything to the season before it knows whether the season will be kind. 己卯 can be vulnerable to giving in contexts that don't reciprocate.", invitation: "The garden decides what it grows. What are you choosing to cultivate this season?", hookKo: "복잡한 것을 쉬워 보이게 하고 쉬운 것을 의미 있어 보이게 만듭니다.", originKo: "己土와 卯木: 봄이 한창인 정원.", shadowKo: "봄 정원은 계절이 친절할지 알기 전에 종종 모든 것을 줍니다.", invitationKo: "정원은 무엇을 기를지 결정합니다. 이번 계절 당신은 무엇을 기르기로 선택하고 있나요?" },
"己巳": { hook: "You understand how things work. Not just people — systems, undercurrents, the logic behind the logic.", origin: "己Earth above 巳Fire: the warm field in late spring. You have always known more about how things work than you've revealed. The practical intelligence in you is extraordinary — the ability to see the mechanism beneath the surface.", shadow: "Too much directed heat dries the soil. 己巳 can overthink, over-analyze, over-prepare — the field that calculates every variable before planting may miss the season entirely.", invitation: "The field knows what it needs. Does the analytical mind trust the ground's intelligence?", hookKo: "사물이 어떻게 작동하는지 이해합니다.", originKo: "己土와 巳火: 늦봄의 따뜻한 들판.", shadowKo: "너무 많은 방향을 가진 열기는 흙을 건조하게 만듭니다.", invitationKo: "들판은 무엇이 필요한지 압니다. 분석적인 마음이 땅의 지능을 신뢰하나요?" },
"己未": { hook: "You've held space for more people than you can count. When was the last time someone held it for you?", origin: "己Earth above 未Earth: double earth in warm summer afternoon — extraordinary empathy. You have an almost bottomless capacity for care — for seeing what people need, for providing the right conditions.", shadow: "The richest soil, unreplenished, goes fallow. 己未 gives so consistently that the depletion is gradual and invisible.", invitation: "The most fertile ground needs fallow years. What would it feel like to rest the field?", hookKo: "셀 수 없이 많은 사람들을 위해 공간을 만들어왔습니다.", originKo: "己土와 未土: 따뜻한 여름 오후의 이중 흙.", shadowKo: "보충되지 않은 가장 풍부한 흙은 휴경지가 됩니다.", invitationKo: "가장 비옥한 땅은 휴경년이 필요합니다. 들판을 쉬게 한다면 어떤 느낌일까요?" },
"己酉": { hook: "You have an eye for what's wrong and a patience for making it right. Not everyone could manage that combination.", origin: "己Earth above 酉Metal: the harvest field in autumn. You don't just see what's wrong — you tend to what's wrong. You don't just notice the gap — you fill it. Quietly, consistently, without being asked.", shadow: "The autumn harvest can become ruthless assessment. 己酉 sometimes turns precision inward — harvesting itself before the season is done.", invitation: "The harvest is not the end of the field's story. What is it time to let rest before the next season?", hookKo: "무엇이 잘못되었는지에 대한 눈과 그것을 바로잡는 인내를 갖고 있습니다.", originKo: "己土와 酉金: 가을의 수확 들판.", shadowKo: "가을 수확은 무자비한 평가가 될 수 있습니다.", invitationKo: "수확은 들판 이야기의 끝이 아닙니다. 다음 계절 전에 쉬게 할 시간이 된 것은 무엇인가요?" },
"己亥": { hook: "You carry something between earth and ocean — a weight that is also a gift that is also sometimes just very heavy.", origin: "己Earth above 亥Water: the garden's edge at the sea. You have an unusual relationship with other people's interior worlds — you absorb them, you understand them, you carry them in ways that blur the line between empathy and identity.", shadow: "The garden at the ocean's edge is the most fertile and the most vulnerable. 己亥 can be overwhelmed by the same emotional currents that make it extraordinary.", invitation: "The shore is where land and sea negotiate their edge. Where is yours?", hookKo: "흙과 대양 사이의 무언가를 지니고 있습니다.", originKo: "己土와 亥水: 바다 끝의 정원.", shadowKo: "대양의 가장자리 정원은 가장 비옥하고 가장 취약합니다.", invitationKo: "해안은 땅과 바다가 경계를 협상하는 곳입니다. 당신의 경계는 어디인가요?" },
"庚子": { hook: "You've had more ideas in a single decade than most people have in a lifetime. The question has always been which ones to cut.", origin: "庚Metal above 子Water: the sword forged in deep water. Your capability runs deep and wide. You don't just have answers — you have the context for why the answers matter.", shadow: "Water erodes metal, given enough time. 庚子 sometimes loses its edge to its own fluidity — the directness softened by too many perspectives.", invitation: "The blade and the water shaped each other. What clarity has the depth given you?", hookKo: "단 한 십 년 동안 대부분의 사람들이 평생 갖는 것보다 더 많은 아이디어를 가졌습니다.", originKo: "庚金과 子水: 깊은 물에서 단련된 검.", shadowKo: "충분한 시간이 주어지면 물은 금속을 침식합니다.", invitationKo: "날과 물이 서로를 형성했습니다. 깊이가 어떤 명료함을 주었나요?" },
"庚寅": { hook: "When you decide something, it's done. Not because you're impulsive — because you're already twenty steps ahead.", origin: "庚Metal above 寅Wood: the blade born in the tiger's dawn. You are not reckless — you are ready. The sword knows what it's for. The tiger knows where it's going. You have both.", shadow: "The blade in the tiger's energy can cut before the moment requires it. 庚寅 can act so decisively that it forecloses options before they've fully opened.", invitation: "The tiger's power is in its patience as much as its speed. Which decisions deserve more waiting?", hookKo: "무언가를 결정하면, 그것은 완료됩니다.", originKo: "庚金과 寅木: 호랑이의 새벽에 태어난 날.", shadowKo: "호랑이 에너지 속의 날은 순간이 요구하기 전에 자를 수 있습니다.", invitationKo: "호랑이의 힘은 속도만큼 인내에 있습니다. 어떤 결정들이 더 많은 기다림을 받을 자격이 있나요?" },
"庚辰": { hook: "You've transformed more than once. Each time, you kept what was real and released what wasn't. That takes ruthlessness with yourself.", origin: "庚Metal above 辰Earth: the sword forged in the dragon's transforming ground. You have a quality of renewal — you've been through significant changes and come out with a different edge, a different clarity.", shadow: "Transformation is addictive. 庚辰 can become someone who needs crisis to feel alive.", invitation: "The dragon's ground can transform anything. What are you choosing to become this time?", hookKo: "한 번 이상 변환했습니다. 매번, 진짜인 것을 유지하고 그렇지 않은 것을 방출했습니다.", originKo: "庚金과 辰土: 용의 변환하는 땅에서 단련된 검.", shadowKo: "변환은 중독성이 있습니다. 庚辰은 위기가 필요한 사람이 될 수 있습니다.", invitationKo: "용의 땅은 무엇이든 변환할 수 있습니다. 이번에 무엇이 되기로 선택하고 있나요?" },
"庚午": { hook: "You have the courage to say the thing that changes the room. You've paid for that your whole life, and you'd do it again.", origin: "庚Metal above 午Fire: the sword in the forge at full heat. You carry the quality of being forged while in use — still being clarified, still being refined, still doing the work while it happens.", shadow: "The metal in the forge is soft before it's hard. 庚午 can be more vulnerable than its directness suggests.", invitation: "The forge is how the blade becomes itself. What is the fire clarifying in you right now?", hookKo: "방을 바꾸는 말을 할 용기가 있습니다.", originKo: "庚金과 午火: 최고 열기의 용광로 속 검.", shadowKo: "용광로 속 금속은 단단해지기 전에 부드럽습니다.", invitationKo: "용광로는 날이 자신이 되는 방법입니다. 지금 불이 당신 안에서 무엇을 명료하게 하고 있나요?" },
"庚申": { hook: "You've never needed anyone to tell you what standard to hold yourself to. That's a gift. It's also sometimes a prison.", origin: "庚Metal above 申Metal: double metal — the blade in the metal's own ground. You know exactly what you stand for. You know exactly what you don't accept. The clarity is the blade.", shadow: "The blade without a scabbard cuts everything — including the hand that carries it. 庚申 can be exhausting to inhabit: the standards applied to the self as fully as to everything else.", invitation: "Even the best blade needs a scabbard. Have you found yours?", hookKo: "자신을 어떤 기준으로 잡아야 하는지 말해줄 사람이 필요한 적이 없습니다.", originKo: "庚金과 申金: 이중 금속.", shadowKo: "칼집 없는 날은 모든 것을 자릅니다.", invitationKo: "최고의 날도 칼집이 필요합니다. 당신의 것을 찾았나요?" },
"庚戌": { hook: "You are someone who keeps their word. In the world as it is, that is a rarer thing than it should be.", origin: "庚Metal above 戌Earth: the blade resting in the watchman's dusk earth. You are the person whose word is genuinely their bond, whose commitments are made slowly but held indefinitely.", shadow: "The loyal sword can guard what has long since needed releasing. 庚戌 can stay committed past the point where commitment serves anyone.", invitation: "Loyalty is a sword. What is it protecting, and is that thing worth the vigilance?", hookKo: "약속을 지키는 사람입니다.", originKo: "庚金과 戌土: 파수꾼의 황혼 땅에서 쉬고 있는 날.", shadowKo: "충성스러운 검은 오래전에 방출이 필요했던 것을 지킬 수 있습니다.", invitationKo: "충성은 검입니다. 무엇을 보호하고 있으며, 그것은 그 경계를 받을 가치가 있나요?" },
"辛丑": { hook: "You became something extraordinary through conditions that were not extraordinary at all. That's the rarest kind of gem.", origin: "辛Metal above 丑Earth: the jewel in winter's compressed ground. You were refined not in favorable circumstances but despite them — shaped by friction, by difficulty, by standards maintained when nothing external required it.", shadow: "The gem formed in winter cold can hold that cold inside. 辛丑 sometimes carries a reserve — an inner frost — that keeps people at a precise distance.", invitation: "The gem is already made. What would it be like to let yourself be held, rather than only displayed?", hookKo: "특별하지 않은 조건들을 통해 특별한 것이 되었습니다.", originKo: "辛金과 丑土: 겨울의 압축된 땅의 보석.", shadowKo: "겨울 추위에 형성된 보석은 내면에 그 추위를 담을 수 있습니다.", invitationKo: "보석은 이미 만들어졌습니다. 단지 전시되는 것이 아니라 담겨지는 것은 어떤 느낌일까요?" },
"辛卯": { hook: "You feel the difference between beautiful and almost beautiful. Most people never learn to hear that gap.", origin: "辛Metal above 卯Wood: the jewel in spring's open hand. You have an extraordinary sensory intelligence: the ability to detect and inhabit the quality of things, to know when something is right in a way that's entirely embodied.", shadow: "The gem in spring is exquisite — and also exposed. 辛卯 carries an aesthetic wound-sensitivity: the same system that perceives beauty precisely also feels its absence as pain.", invitation: "The gem and the spring are both alive to the same things. What have you been too refined to enjoy lately?", hookKo: "아름다운 것과 거의 아름다운 것의 차이를 느낍니다.", originKo: "辛金과 卯木: 봄의 열린 손의 보석.", shadowKo: "봄의 보석은 절묘하고 노출되어 있습니다.", invitationKo: "보석과 봄은 둘 다 같은 것들에 살아있습니다. 최근에 너무 정제되어서 즐기지 못한 것이 무엇인가요?" },
"辛巳": { hook: "You see what things are worth — accurately, immediately, permanently. That's not judgment. That's calibration.", origin: "辛Metal above 巳Fire: the gem in the heat of the intelligent flame. You have an extraordinary precision of assessment: you know what things are worth in a conversation, in a relationship, in a context — as perception, not calculation.", shadow: "辛巳 sometimes experiences being seen and assessed by others as something clinical — the precision applied to itself, the sense of being evaluated rather than met.", invitation: "The flame that reveals the gem reveals everything. What are you ready to see clearly about yourself?", hookKo: "사물의 가치를 봅니다 — 정확하게, 즉시, 영구적으로.", originKo: "辛金과 巳火: 지능적인 불꽃의 열기 속 보석.", shadowKo: "辛巳는 때로 다른 사람들에게 보이고 평가받는 것을 임상적인 것으로 경험합니다.", invitationKo: "보석을 드러내는 불꽃은 모든 것을 드러냅니다." },
"辛未": { hook: "You carry beauty and meaning as a weight, not a decoration. That makes you different from most people who claim to value those things.", origin: "辛Metal above 未Earth: the gem embedded in warm, receptive summer soil. You have grounded beauty — an aesthetic precision woven into life, making the everyday more than it was before you touched it.", shadow: "The gem in warm earth can become comfortable to the point of being buried. 辛未 sometimes allows itself to be covered by others' needs until its own precise nature is obscured.", invitation: "The gem doesn't need to be above the ground to be valuable. But it does need to be seen. Who sees you?", hookKo: "아름다움과 의미를 장식이 아닌 무게로 지닙니다.", originKo: "辛金과 未土: 따뜻하고 수용적인 여름 흙에 박힌 보석.", shadowKo: "따뜻한 흙의 보석은 묻힐 정도로 편안해질 수 있습니다.", invitationKo: "보석은 귀하기 위해 땅 위에 있을 필요가 없습니다. 하지만 보여질 필요는 있습니다." },
"辛酉": { hook: "You are the standard. Not because you set yourself there — because everything in your vicinity organizes around what's genuine and what isn't.", origin: "辛Metal above 酉Metal: double metal at the hour of the rooster. You know exactly what you stand for. The clarity is the blade. You were probably told your standards were impossible before you realized that impossible was just other people's ceiling.", shadow: "The double metal loupe sees everything — including flaws in itself. 辛酉 can turn precision into relentless self-assessment, allowing no declaration of good enough.", invitation: "The finest jewel in the collection is allowed to rest in its setting. When do you let yourself rest in yours?", hookKo: "당신이 기준입니다.", originKo: "辛金과 酉金: 닭의 시간의 이중 금속.", shadowKo: "이중 금속 렌즈는 모든 것을 봅니다 — 자신의 결함도 포함해서.", invitationKo: "컬렉션에서 가장 훌륭한 보석은 자신의 세팅에서 쉬도록 허락됩니다." },
"辛亥": { hook: "You hold depth and clarity in the same hand — and most people only get one or the other.", origin: "辛Metal above 亥Water: the gem at the bottom of the deep ocean. You have both: the emotional depth of someone who has been in the water all their life, and the precision of someone who has also been watching it from outside.", shadow: "The gem in the ocean is extraordinary — and very far from the surface. 辛亥 can be inaccessible in its depth.", invitation: "The deep ocean holds the clearest gems. Who has shown they can go that deep?", hookKo: "깊이와 명료함을 같은 손에 담고 있습니다.", originKo: "辛金과 亥水: 깊은 대양 바닥의 보석.", shadowKo: "대양 속의 보석은 특별하고 표면에서 매우 멀리 있습니다.", invitationKo: "깊은 대양은 가장 맑은 보석을 담고 있습니다. 그 깊이까지 갈 수 있음을 보여준 사람은 누구인가요?" },
"壬子": { hook: "You've always lived in the undercurrent — processing everything at a depth that the surface doesn't show.", origin: "壬Water above 子Water: the great river meeting the midnight spring. You have insight that other people mistake for opinion. It's pattern recognition from very far down.", shadow: "Double water can become lost in itself. 壬子 sometimes overthinks in real-time — the analysis looping, the pattern-matching outrunning the action.", invitation: "The river and the spring both know where they're going. Do you let yourself be guided by that knowing?", hookKo: "당신은 항상 저류에 살아왔습니다.", originKo: "壬水와 子水: 자정 샘을 만나는 대강.", shadowKo: "이중 물은 자신 안에 길을 잃을 수 있습니다.", invitationKo: "강과 샘 둘 다 어디로 가는지 알고 있습니다. 그 앎에 이끌리도록 자신을 허락하나요?" },
"壬寅": { hook: "You see where things are going before most people see where they are. That's useful. It's also isolating.", origin: "壬Water above 寅Wood: the great river flowing through the tiger's mountain. You have both the depth and the decisiveness — the ability to understand a situation completely and then move with it rather than just observing.", shadow: "The river moving through tiger country can run too fast for its own intelligence. 壬寅 sometimes mistakes momentum for wisdom.", invitation: "The river runs fastest through the tiger's mountain. What is it carrying to the sea?", hookKo: "대부분의 사람들이 지금 있는 곳을 보기 전에 사물이 어디로 가는지 봅니다.", originKo: "壬水와 寅木: 호랑이의 산을 통해 흐르는 대강.", shadowKo: "호랑이 지역을 통해 흐르는 강은 자신의 지능을 위해 너무 빠르게 달릴 수 있습니다.", invitationKo: "강은 호랑이의 산을 통해 가장 빠르게 흐릅니다. 무엇을 바다로 운반하고 있나요?" },
"壬辰": { hook: "You carry a power that you've spent a long time figuring out what to do with. The figuring is almost over.", origin: "壬Water above 辰Earth: the great river meeting the dragon's transforming ground. You carry the past and the future simultaneously — people sense the weight of what you know and the openness of what you're becoming.", shadow: "壬辰 can be hard to contain — the energy moving in multiple directions at once, the transformation potential sometimes expressed as turbulence.", invitation: "The river becomes the ocean at the dragon's gate. What are you in the process of becoming?", hookKo: "당신은 오랫동안 무엇을 해야 할지 파악해온 힘을 지니고 있습니다.", originKo: "壬水와 辰土: 용의 변환하는 땅을 만나는 대강.", shadowKo: "壬辰은 담기 어려울 수 있습니다.", invitationKo: "강은 용의 문에서 대양이 됩니다. 무엇이 되는 과정 중에 있나요?" },
"壬午": { hook: "You've always known where the energy in a room is going before the room did. That's not luck. That's 壬午.", origin: "壬Water above 午Fire: the great river meeting the noon sun. 壬午 is the most dynamic water pillar: intelligence that is heated, intuition that has urgency, depth that moves with purpose and force.", shadow: "Fire and water together create unstable weather. 壬午 carries the pressure of insight that arrives before the words to express it.", invitation: "Steam rises where water meets fire. What are you ready to let rise?", hookKo: "당신은 항상 방의 에너지가 어디로 가는지 방이 알기 전에 알았습니다.", originKo: "壬水와 午火: 정오의 태양을 만나는 대강.", shadowKo: "불과 물이 함께하면 불안정한 날씨를 만듭니다.", invitationKo: "증기는 물이 불을 만나는 곳에서 오릅니다." },
"壬申": { hook: "You cut through confusion the way rivers cut through stone — not by force, but by persistence and precision.", origin: "壬Water above 申Metal: the great river with a metal blade at its heart. You think in systems — you see the architecture of situations before others see the walls — and you communicate that with a clarity that other water pillars don't always achieve.", shadow: "Metal in the river can cut things that should have been allowed to flow. 壬申 sometimes imposes structure on what needed freedom.", invitation: "The river and the blade both know their purpose. Which one is guiding you right now?", hookKo: "강이 돌을 자르는 방식으로 혼란을 자릅니다.", originKo: "壬水와 申金: 금속 날을 중심에 가진 대강.", shadowKo: "강 안의 금속은 흐르도록 허락되었어야 할 것들을 자를 수 있습니다.", invitationKo: "강과 날 둘 다 자신의 목적을 알고 있습니다. 지금 당신을 이끌고 있는 것은 어느 쪽인가요?" },
"壬戌": { hook: "You carry wisdom that came from experience, not from books. People feel the difference when you speak.", origin: "壬Water above 戌Earth: the great river meeting the watchman's dusk earth. You have earned your understanding the hard way — through time, through presence, through staying when easier options were available.", shadow: "The river held by the watchman's earth can become still — stopped, not peaceful. 壬戌 can hold on to the past with the same loyalty 戌 uses to guard the fire.", invitation: "The loyal earth teaches the river to stay. What has the river learned from that lesson that's worth carrying forward?", hookKo: "책이 아닌 경험에서 온 지혜를 지니고 있습니다.", originKo: "壬水와 戌土: 파수꾼의 황혼 땅을 만나는 대강.", shadowKo: "파수꾼의 땅에 의해 담긴 강은 고요해질 수 있습니다.", invitationKo: "충성스러운 땅은 강에게 머무는 법을 가르칩니다." },
"癸丑": { hook: "You've nourished things in secret that are still living because of you. You'll never know them all.", origin: "癸Water above 丑Earth: the mountain spring in winter's frozen ground. Your care has gone places you'll never trace. It became part of people who don't know your name.", shadow: "The spring that seeps through frozen ground exhausts itself slowly. 癸丑 can give so quietly that the depletion is invisible to everyone — including itself.", invitation: "Spring is a door the ice can't hold forever. What are you ready to emerge into?", hookKo: "비밀스럽게 당신 때문에 아직 살아있는 것들을 양육했습니다.", originKo: "癸水와 丑土: 겨울의 얼어붙은 땅의 산속 샘.", shadowKo: "얼어붙은 땅을 통해 스며드는 샘은 천천히 소진됩니다.", invitationKo: "봄은 얼음이 영원히 붙들 수 없는 문입니다. 무엇으로 나아갈 준비가 되었나요?" },
"癸卯": { hook: "You feel things before they arrive. You've learned to call that sensitivity rather than strangeness.", origin: "癸Water above 卯Wood: the mountain rain falling on spring's open earth. You enter situations at their most receptive points, you sense exactly when and how to offer what you carry, you leave things changed without announcing that you did it.", shadow: "The rain that falls in spring can fall too readily. 癸卯 sometimes gives without checking whether the ground needs more water.", invitation: "Spring rain and spring soil are in conversation. Are you listening to both sides?", hookKo: "도달하기 전에 것들을 느낍니다.", originKo: "癸水와 卯木: 봄의 열린 땅에 내리는 산비.", shadowKo: "봄에 내리는 비는 너무 쉽게 내릴 수 있습니다.", invitationKo: "봄비와 봄 흙은 대화 중입니다. 양쪽을 듣고 있나요?" },
"癸巳": { hook: "You understand things that other people only manage to feel. That's a strange kind of loneliness.", origin: "癸Water above 巳Fire: the mountain spring flowing toward the intelligent flame. 巳Fire distills the water, bringing out the essence. You can hold feeling and understanding simultaneously — the world kept asking you to pick one.", shadow: "癸巳 can become too concentrated — the sensitivity too intense, the perception too accurate, the understanding of others so precise that crowds become difficult.", invitation: "The distilled water is more powerful than the rain. What are you most concentrated toward?", hookKo: "다른 사람들이 겨우 느끼는 것들을 이해합니다.", originKo: "癸水와 巳火: 지능적인 불꽃을 향해 흐르는 산속 샘.", shadowKo: "증류된 샘은 강력합니다. 癸巳는 너무 농축될 수 있습니다.", invitationKo: "증류된 물은 비보다 더 강력합니다. 무엇을 향해 가장 농축되어 있나요?" },
"癸未": { hook: "You've been the invisible thing that made everything grow. It's time someone named what you actually did.", origin: "癸Water above 未Earth: the gentle rain on the afternoon garden. You are a catalyst for other people's becoming, and you do it so quietly that most people don't trace it back to you.", shadow: "癸未 sometimes finds that the creativity and care it offers has been absorbed by everything around it — the garden thriving while the rain doesn't know where itself ends.", invitation: "The garden in afternoon light is something you helped make. Are you in it, or only behind it?", hookKo: "모든 것이 자라게 한 보이지 않는 것이었습니다.", originKo: "癸水와 未土: 오후 정원의 부드러운 비.", shadowKo: "정원 비는 자신이 무엇을 돕고 자라는지 선택하지 못합니다.", invitationKo: "오후 빛의 정원은 당신이 만드는 데 도움을 준 것입니다." },
"癸酉": { hook: "You hear what isn't said. That's not a skill you developed — it's just how you're tuned.", origin: "癸Water above 酉Metal: the mountain spring filtered through autumn crystal. You've always known when people were lying — not because you're suspicious, but because you can hear the frequency that doesn't match the words.", shadow: "癸酉 sometimes carries the burden of knowing too much about the people around them — the gap between what people say and what the spring hears always present.", invitation: "The filtered spring is the clearest water. What has it shown you about yourself that you haven't acknowledged yet?", hookKo: "말해지지 않은 것을 듣습니다.", originKo: "癸水와 酉金: 가을 수정을 통해 걸러진 산속 샘.", shadowKo: "수정의 명료함은 볼 수 없게 된 것을 포함하여 모든 것을 보여줍니다.", invitationKo: "걸러진 샘은 가장 맑은 물입니다." },
"癸亥": { hook: "You are the oldest feeling in the room. Not because of age — because of what you carry.", origin: "癸Water above 亥Water: double water, both ancient, both deep. You feel things that don't have words yet. You've always been a little out of time — belonging to no particular moment, reading all the moments at once.", shadow: "Double water can become the place where everything disappears. 癸亥 sometimes absorbs so much that there is no clear center.", invitation: "The deepest water knows the oldest things. What does it know about you that you haven't let yourself hear?", hookKo: "당신은 방에서 가장 오래된 감정입니다.", originKo: "癸水와 亥水: 이중 물, 둘 다 오래되고, 둘 다 깊습니다.", shadowKo: "이중 물은 모든 것이 사라지는 장소가 될 수 있습니다.", invitationKo: "가장 깊은 물은 가장 오래된 것들을 알고 있습니다." }
}; // end PILLAR_NARRATIVES

// ═══════════════════════════════════════════════
// DAY MASTER DATA (Storyteller Voice)
// ═══════════════════════════════════════════════
const DM = {
  '甲': {
    labelEn: 'Yang Wood · The Ancient Tree', labelKo: '갑목 · 거목',
    hookEn: "You've walked away from things that were good enough — not out of recklessness, but because something in you literally cannot stop.",
    hookKo: "당신은 평생 방향이 있었습니다 — 그리고 그것을 물어보는 누구에게도 설명하지 못했습니다.",
    originEn: "You came into this world already pointed somewhere. Before anyone handed you a map, you had a direction — and you've been moving toward it ever since, through every season that said stop, every person who said wait, every version of yourself that considered settling where it was comfortable. 甲Wood is the first of the ten stems, and it carries the pressure of that: the one who moves before the path is clear, who breaks ground so others don't have to, who grows up through stone if stone is what's in the way.\n\nThis is not stubbornness in the ordinary sense. The oak doesn't refuse to bend out of pride — it cannot bend without breaking. That's structural. That's what you are.",
    originKo: "당신은 이 세상에 이미 방향이 잡힌 채 왔습니다 — 무언가를 향해, 어딘가를 향해, 어떤 것이 되어야 하는 모습을 향해. 누가 시켜서가 아니라. 그렇게 만들어졌기 때문에. 甲木은 십간의 첫 번째이고, 그것을 담고 있습니다 — 첫 번째의 압박: 먼저 움직이고, 먼저 문제를 명명하고, 모두가 아직 들어갈지 결정 중인 방에 먼저 들어갑니다.",
    shadowEn: "The tree that grows only upward eventually outgrows everything that loved it. The people who stayed closest to you learned to grab onto the trunk — some of them held on, some let go, and you kept moving either way. There are names you don't say anymore. You wonder, sometimes in the quiet after a long day of forward movement, whether the direction was worth the distance.",
    shadowKo: "대가가 있습니다: 너무 많은 것을 향해 걸어왔기 때문에 때로 어떻게 머물러야 할지 모릅니다. 지루함이 아니라 — 다음의 끊임없는 당김 때문에. 당신을 사랑하는 사람들은 줄기를 잡는 법을 배웠습니다. 잡지 못한 사람들은 떠났고, 당신의 일부는 속도를 늦춰야 했을지 의문입니다.",
    invitationEn: "The oak doesn't just grow up. At some point, it grows deep. What are you rooting yourself into?",
    invitationKo: "거목은 위로만 자라지 않습니다. 어느 순간, 깊이 자랍니다. 사주가 묻습니다: 당신은 무엇에 뿌리를 내리고 있나요?",
    keywordsEn: ['Growth', 'Direction', 'Integrity', 'Pioneer'],
    keywordsKo: ['성장', '방향', '성실', '개척'],
  },
  '乙': {
    labelEn: 'Yin Wood · The Living Vine', labelKo: '을목 · 생명의 덩굴',
    hookEn: "You've been underestimated in every room you've ever walked into. You let them. And by the time they realize, you're already somewhere else.",
    hookKo: "당신은 항상 돌아가는 길을 찾아왔습니다 — 그리고 사람들은 그것을 계획이 없다고 착각합니다.",
    originEn: "The vine doesn't fight the wall. It climbs it. This is not compromise — this is the most sophisticated survival strategy in any room, and you have been running it since before you had words for what you were doing. 乙Wood adapts not because it lacks conviction, but because it understands something rigid things never learn: the path isn't always straight, and the fastest route around an obstacle is rarely through it.\n\nYou have been underestimated more times than you can count. You don't particularly mind. The vine has already reached the top by the time the oak is still arguing about which direction to grow.",
    originKo: "덩굴은 벽과 싸우지 않습니다. 그것을 올라갑니다. 이것은 타협이 아닙니다 — 이것은 방 안에서 가장 정교한 생존 전략이고, 당신은 무엇을 하는지 설명할 말이 있기도 전부터 그것을 실행해왔습니다. 乙木은 확신이 없어서 적응하는 것이 아니라, 단단한 것들이 결코 배우지 못하는 것을 이해하기 때문입니다: 길이 항상 직선은 아닙니다.",
    shadowEn: "But the vine that never stops adapting can lose the shape of itself. You've been so many things to so many people — in so many rooms, with so many different versions of your smile — that there are moments, usually quiet ones, usually alone, where you genuinely aren't sure what you want. Not what would be best. Not what would be kind. What you want. That question sits longer than it should.",
    shadowKo: "그러나 멈추지 않고 적응하는 덩굴은 자신의 형태를 잃을 수 있습니다. 당신은 너무 많은 사람들에게 너무 많은 것이었기 때문에 — 보통 조용한 순간, 보통 혼자일 때 — 진정으로 자신이 무엇을 원하는지 확신하지 못합니다.",
    invitationEn: "The vine knows how to reach. Does it know how to ask?",
    invitationKo: "덩굴은 뻗는 법을 알고 있습니다. 요청하는 법도 알고 있나요?",
    keywordsEn: ['Adaptability', 'Intuition', 'Elegance', 'Resilience'],
    keywordsKo: ['적응력', '직관', '우아함', '회복력'],
  },
  '丙': {
    labelEn: 'Yang Fire · The Sun', labelKo: '병화 · 태양',
    hookEn: "You light up every room you walk into. That's not ego — it's physics. And you've spent years apologizing for it anyway.",
    hookKo: "당신은 조용히 방에 들어간 적이 없습니다 — 그리고 그것이 문제인지 오랫동안 고민해왔습니다.",
    originEn: "You were born as the sun: full-spectrum, unfiltered, and non-negotiable. Not a lamp you can dim when the room gets sensitive. Not a spotlight you point somewhere useful. The sun doesn't perform — it simply is, and the world organizes itself around that.\n\nBefore you understood charisma, you had it. Before you knew what 'taking up space' meant, people were already orbiting you — some grateful, some resentful, most without understanding why. That was never arrogance. That was 丙Fire doing what fire does: rising, filling, reaching every corner of the room before it thinks to stop.",
    originKo: "당신은 태양으로 태어났습니다: 전체 스펙트럼, 필터 없음, 협상 불가. 방이 너무 민감할 때 낮출 수 있는 램프가 아닙니다. 유용한 곳에 가리키는 스포트라이트도 아닙니다. 태양은 연기하지 않습니다 — 단순히 존재하고, 세상이 그 주위에 조직됩니다.\n\n카리스마를 이해하기 전에, 당신은 그것을 갖고 있었습니다. '공간을 차지하는 것'이 무엇을 의미하는지 알기 전에, 사람들은 이미 당신을 중심으로 공전하고 있었습니다. 카리스마가 무엇인지 알기도 전에, 당신은 이미 그것을 갖고 있었습니다. '공간을 차지한다'는 말의 의미를 알기도 전에, 사람들은 이미 당신을 중심으로 돌고 있었습니다.",
    shadowEn: "Here's what the sun doesn't see: it can blind people who look directly at it. The intensity you carry — the warmth, the energy, the brightness that isn't performance, it's just you — can overwhelm the people who love you most. Underneath all of that light, something in you is counting: who stayed in the room when you were dim? Because 丙Fire dims. And in those moments, you learn who was actually there for the light — and who was there for you.",
    shadowKo: "태양이 보지 못하는 것이 있습니다: 직접 바라보는 사람들을 눈멀게 합니다. 당신이 모든 방에 가져오는 강도 — 따뜻함, 에너지, 밝기 — 는 당신을 가장 사랑하는 사람들을 압도할 수 있습니다.\n\n또한 이것이 있습니다: 당신은 보이길 필요로 합니다. 단지 알아채지는 것이 아니라 — 보이는 것. 목격되는 것.",
    invitationEn: "Who gets to see you when you're not performing?",
    invitationKo: "당신이 연기하지 않을 때 당신을 볼 수 있는 사람은 누구인가요?",
    keywordsEn: ['Radiance', 'Charisma', 'Generosity', 'Dignity'],
    keywordsKo: ['빛남', '카리스마', '관대함', '존엄'],
  },
  '丁': {
    labelEn: 'Yin Fire · The Candle', labelKo: '정화 · 촛불',
    hookEn: "You've been called cold by people who had no idea how much you were holding back.",
    hookKo: "당신은 얼마나 많은 것을 참고 있는지 전혀 모르는 사람들에게 차갑다는 말을 들어왔습니다.",
    originEn: "You don't fill the room with light. You illuminate one thing at a time — the face across from you, the problem no one else is looking at, the corner where someone is alone. 丁Fire is concentrated warmth. Its power is in precision, not size. And you have always been precise about who gets the full light.\n\nThe ones you've let close know what no one else knows: underneath the composed exterior, you feel everything. More than you show. More than most people are built to feel.",
    originKo: "당신은 방을 빛으로 가득 채우지 않습니다. 한 번에 하나씩 비춥니다 — 맞은편 얼굴, 아무도 보지 않는 문제, 혼자인 구석의 사람. 丁火는 집중된 따뜻함입니다. 그 힘은 크기가 아니라 정밀함에 있습니다.",
    shadowEn: "When 丁Fire goes out, it doesn't announce it. It just gets dimmer, and dimmer, until one day the room is dark and you wonder when it happened. You absorb other people's emotional weather without realizing it. You can be hurt by something that happened six months ago while appearing completely fine.",
    shadowKo: "丁火가 꺼질 때, 그것을 알리지 않습니다. 그냥 점점 희미해집니다, 어느 날 방이 어두워지고 언제 그렇게 됐는지 의문이 생길 때까지.",
    invitationEn: "The flame doesn't have to be small to be selective. Who in your life has earned the full light?",
    invitationKo: "불꽃은 선택적이기 위해 작을 필요가 없습니다. 삶에서 완전한 빛을 얻을 자격이 있는 사람은 누구인가요?",
    keywordsEn: ['Depth', 'Devotion', 'Perception', 'Constancy'],
    keywordsKo: ['깊이', '헌신', '통찰', '항구성'],
  },
  '戊': {
    labelEn: 'Yang Earth · The Mountain', labelKo: '무토 · 산',
    hookEn: "You've absorbed things in silence that would have broken louder people. You just kept standing. And nobody thought to ask — because mountains don't fall.",
    hookKo: "더 소리 높은 사람들을 무너뜨렸을 것들을 당신은 침묵 속에 흡수했습니다. 그냥 계속 서 있었습니다. 아무도 묻지 않았습니다 — 산은 쓰러지지 않으니까요.",
    originEn: "You are the fixed point in the lives of the people around you. In a world full of people who destabilize at the first sign of turbulence, you are the thing that doesn't move. Not because you aren't affected — you are, deeply — but because you learned, probably very young, that someone had to be the mountain. And you were the most qualified person in the room.\n\n戊Earth doesn't perform stability. It is stability. Your presence communicates, without words, that whatever is happening can be survived. People feel the ground beneath their feet when you walk in. That's not nothing. That's everything, actually. It just costs in ways no one sees.",
    originKo: "당신은 주변 사람들의 삶에서 고정점입니다. 혼란의 첫 신호에 불안정해지는 사람들로 가득 찬 세상에서, 당신은 움직이지 않는 것입니다. 영향을 받지 않아서가 아니라 — 당신은 깊이 영향을 받습니다 — 아마도 아주 어렸을 때, 누군가는 산이 되어야 한다는 것을 배웠기 때문입니다.",
    shadowEn: "The mountain shows nothing on the surface. What lives underneath is another matter. There's accumulated pressure in you — too many small surrenders, too many times you held the room together by holding yourself still. 戊Earth doesn't break in the usual way. It holds and holds and holds, and then the ground shifts in a way that surprises even you. The earthquake doesn't announce itself.",
    shadowKo: "산은 모든 것을 흡수하고 표면에는 아무것도 보이지 않습니다 — 즉, 떨림이 깊어지고, 무언가 마침내 깨지면 완전히 깨집니다. 당신 안에는 쌓인 억압이 있습니다.",
    invitationEn: "You've been the earth that everyone plants their roots in. What are you rooting yourself into?",
    invitationKo: "당신은 모든 사람이 뿌리를 내리는 땅이었습니다. 당신은 무엇에 뿌리를 내리고 있나요?",
    keywordsEn: ['Stability', 'Patience', 'Trust', 'Foundation'],
    keywordsKo: ['안정', '인내', '신뢰', '기반'],
  },
  '己': {
    labelEn: 'Yin Earth · The Fertile Field', labelKo: '기토 · 비옥한 들판',
    hookEn: "You noticed that person was struggling before they said a word. You fixed it before they asked. Nobody noticed — including them. That's not unusual for you.",
    hookKo: "당신은 삶의 많은 시간을 다른 모든 사람이 돌봐지도록 하는 데 보냈고, 자신의 목록에서 마지막 사람이 되었습니다.",
    originEn: "Fertile soil doesn't announce itself. Every garden, every orchard, everything that grows in open air exists because the ground beneath it was prepared — and the ground gets none of the credit. 己Earth reads people the way soil reads roots: beneath the surface, in the dark, where no one's watching. You knew what that colleague needed before they finished the sentence. You adjusted the emotional temperature of every room you've walked into.\n\nThis is not kindness in the soft sense. This is precision empathy. And it runs on resources that don't refill automatically.",
    originKo: "비옥한 토양은 주변의 모든 것을 자라게 합니다. 정원은 토양 없이 존재하지 않습니다 — 하지만 정원이 모든 공로를 얻습니다. 己土는 다른 사람들의 번영을 위한 기반입니다.",
    shadowEn: "The soil that gives everything, season after season, goes quiet when it's depleted. Not dramatic — just empty, in a way that's hard to explain to the things still growing in it. You've offered care preemptively, before anyone asked, enough times that you've started to confuse being needed with being loved. You know the difference between those two things. You've always known. That's what makes it complicated.",
    shadowKo: "모든 것을 주는 토양은 고갈될 수 있습니다. 당신은 관대함에 대한 비범한 능력이 있고, 자신의 자원을 초과했을 때를 인식하는 데 어려움을 겪습니다.",
    invitationEn: "What would it feel like to let someone take care of you?",
    invitationKo: "누군가가 당신을 돌보도록 허락하면 어떤 느낌일까요?",
    keywordsEn: ['Nourishment', 'Care', 'Practicality', 'Community'],
    keywordsKo: ['영양', '돌봄', '실용성', '공동체'],
  },
  '庚': {
    labelEn: 'Yang Metal · The Iron Sword', labelKo: '경금 · 쇠검',
    hookEn: "You've been saying the thing everyone else was thinking — and watching them flinch — your entire life.",
    hookKo: "당신은 평생 모두가 생각하던 것을 말해왔습니다 — 그리고 그들이 움츠러드는 것을 지켜봤습니다.",
    originEn: "You came into this world as raw ore: dense, heavy, resistant to pressure. That wasn't a flaw in the blueprint. 庚Metal is forged in autumn, the season when the world stops growing and starts hardening. Before anyone taught you what 'principle' meant, you already had one: things are right or they're wrong, and pretending otherwise wastes everyone's time.\n\nWhat looks like bluntness from the outside is something older — it's the metal testing its own edge. Every direct word you've spoken, every moment you refused to bend when everyone expected you to, that was you becoming the thing you were always meant to be: sharp, honest, unambiguous. The world didn't know what to do with you. That's a them problem.",
    originKo: "당신은 가공되지 않은 광석으로 이 세상에 왔습니다: 밀도 있고, 무겁고, 압박에 저항적입니다. 그것은 설계의 실수가 아니었습니다. 庚金은 가을에 단련됩니다, 세상이 성장을 멈추고 굳어지기 시작하는 계절.\n\n외부에서 무뚝뚝함처럼 보이는 것은 더 오래된 무언가입니다 — 자신의 날을 시험하는 금속입니다.",
    shadowEn: "The blade that never rests gets brittle. The same directness that makes you trustworthy in a crisis makes you feel dangerous in small talk. You are not broken. You are a precision instrument in a world that mostly needs spoons. But: the people closest to you sometimes hold you carefully — like something that could cut. And you've noticed. And part of you doesn't know what to do with that.",
    shadowKo: "쉬지 않는 날은 부러지기 쉽습니다. 위기에서 당신을 신뢰할 수 있게 만드는 동일한 직접성이 가벼운 대화에서 불안하게 느끼게 만듭니다.",
    invitationEn: "庚Metal was forged to cut — but even the best blade was made by someone who cared about its edge. Who takes care of yours?",
    invitationKo: "庚金은 베기 위해 벼려졌습니다. 하지만 최고의 칼날도 그것을 아끼는 사람이 만들었습니다. 당신의 날을 갈아주는 사람은 누구입니까?",
    keywordsEn: ['Precision', 'Justice', 'Courage', 'Clarity'],
    keywordsKo: ['정밀함', '정의', '용기', '명확성'],
  },
  '辛': {
    labelEn: 'Yin Metal · The Refined Jewel', labelKo: '신금 · 정련된 보석',
    hookEn: "You have a standard that almost nothing meets — including yourself. The world calls this perfectionism. You call it knowing what's possible.",
    hookKo: "당신이 세운 기준을 충족하는 것은 거의 없습니다 — 당신 자신을 포함해서. 세상은 이것을 완벽주의라 부릅니다. 당신은 그것을 가능성을 아는 것이라 부릅니다.",
    originEn: "辛Metal is not raw iron. It's the gem that emerged from compression — already refined, already precise. Where 庚Metal is ore being shaped, you are the thing that resulted from that process: the jewel where every facet is intentional, the scalpel, the poem where no word is accidental.\n\nYou carry an internal quality standard that runs constantly, automatically, below conscious awareness. It catches inconsistencies. It notices what's off. It finds the gap between what's promised and what's delivered. Other people call this perfectionism. The chart calls it knowing your own value. The problem is that most of the world isn't calibrated to that level — and you feel every deviation.",
    originKo: "辛金은 가공되지 않은 철이 아닙니다. 압축에서 나온 보석입니다. 당신이 지키는 모든 기준, 당신이 알아채는 모든 결함 — 그것은 보석이 자신의 가치를 아는 것입니다.",
    shadowEn: "When you're hurt, you don't break. You sharpen. And the people who love you sometimes can't reach the blade. Your composure and your standards can make you appear unreachable — and people who might love you deeply sometimes don't try, because they assume you wouldn't want them to. The loneliness of unmatched standards is real. So is the wound that goes inward, refines itself into something cold, and waits.",
    shadowKo: "상처를 받으면 부러지지 않습니다. 날카로워집니다. 그리고 당신을 사랑하는 사람들이 때로 날에 닿지 못합니다.",
    invitationEn: "The most beautiful swords have a name. What is yours?",
    invitationKo: "가장 아름다운 검에는 이름이 있습니다. 당신의 이름은 무엇인가요?",
    keywordsEn: ['Excellence', 'Discernment', 'Refinement', 'Precision'],
    keywordsKo: ['탁월함', '분별력', '정련', '정밀함'],
  },
  '壬': {
    labelEn: 'Yang Water · The Great River', labelKo: '임수 · 대강',
    hookEn: "You've mapped everyone in your life — their patterns, their fears, their tells — and kept it entirely to yourself. Not out of strategy. Out of something lonelier than that.",
    hookKo: "당신 삶의 모든 사람을 파악해왔습니다 — 그들의 패턴, 두려움, 징조 — 그리고 그것을 전부 혼자 간직했습니다. 전략 때문이 아닙니다. 그보다 더 외로운 무언가 때문에.",
    originEn: "You were born as water that has no bottom. Not the ocean — the great river: moving, navigating, reading every terrain it passes through without judgment and without stopping. Other people are sitting on the riverbank wondering what the water is thinking. The water is already three miles downstream.\n\nYou absorb everything. A comment made in passing. A shift in someone's energy halfway through dinner. A pattern in numbers that no one else caught. This isn't effort — it's your natural state. You map people the way rivers map landscapes: completely, instinctively, and without being asked.",
    originKo: "당신은 바닥이 없는 물로 태어났습니다. 대양이 아니라 — 대강: 움직이고, 항해하고, 통과하는 모든 지형을 판단 없이, 멈추지 않고 읽습니다. 다른 사람들은 강둑에 앉아 물이 무엇을 생각하는지 의문입니다. 물은 이미 3마일 하류에 있습니다.",
    shadowEn: "Nothing contains you for long. Not a job. Not a city. Not a relationship. When something starts to feel like a cage — even a comfortable one — part of you is already calculating how to flow around it. The people who love you learn this early, and they hold you loosely, because that's the only way to hold a river. You carry a loneliness that doesn't come from being alone. It comes from knowing too much — and choosing, constantly, how little to say.",
    shadowKo: "아무것도 당신을 오래 담지 못합니다. 직업도, 도시도, 관계도. 무언가가 새장처럼 느껴지기 시작하면 — 황금 새장이라도 — 당신의 일부는 이미 어떻게 흘러 지나갈지 계획하고 있습니다.",
    invitationEn: "You've spent so much energy understanding everyone else. What would happen if you let someone understand you?",
    invitationKo: "당신은 다른 모든 사람을 이해하는 데 너무 많은 에너지를 쏟았습니다. 누군가가 당신을 이해하도록 허락하면 어떻게 될까요?",
    keywordsEn: ['Intelligence', 'Depth', 'Adaptability', 'Mystery'],
    keywordsKo: ['지능', '깊이', '적응력', '신비'],
  },
  '癸': {
    labelEn: 'Yin Water · The Mountain Spring', labelKo: '계수 · 산속의 샘',
    hookEn: "You've cried at other people's grief before they started crying themselves. That's what happens when the boundaries between you and everyone else are thinner than most people's are.",
    hookKo: "다른 사람들이 울기 시작하기 전에 당신이 먼저 울었습니다. 당신과 다른 사람들 사이의 경계가 대부분의 사람들보다 훨씬 얇을 때 일어나는 일입니다.",
    originEn: "癸Water is the rain and the dew — not the flood, not the ocean. It seeps. It infiltrates. It nurtures things that don't even know they're being nurtured. You absorb the emotional frequency of a room before anyone has spoken. You already knew, when you walked in, who was hurting and who was performing and who needed to leave early. You didn't say anything. You rarely do.\n\nYou have an interior life of remarkable richness. What emerges in the right conversation, with the right person, is extraordinary. Most people never get close enough to see it.",
    originKo: "癸水는 비와 이슬입니다 — 홍수도, 대양도 아닙니다. 스며듭니다. 침투합니다. 양육받는 것조차 모르는 것들을 양육합니다. 당신은 누구도 말하기 전에 방의 감정 주파수를 흡수합니다.",
    shadowEn: "Water that absorbs everything eventually becomes murky. You carry everyone else's emotional weather — their grief, their anxiety, their unspoken need — and sometimes you genuinely don't know where you end and another person begins. The exhaustion of being this open is real, and it's rarely acknowledged. Also: you see the best version of everyone. That's a kind of love. It's also, sometimes, a way of avoiding the version that's actually there.",
    shadowKo: "모든 것을 흡수하는 물은 결국 탁해집니다. 당신은 모두의 감정적 날씨를 지고 다닙니다 — 그리고 때로 당신이 어디서 끝나고 다른 사람이 어디서 시작하는지 모릅니다.",
    invitationEn: "You've rained on everyone else's thirsty ground. What would it feel like to stay somewhere long enough to see what grows?",
    invitationKo: "당신은 모든 사람의 목마른 땅에 비를 내렸습니다. 무언가가 자라는 것을 볼 만큼 충분히 한 곳에 머문다면 어떤 느낌일까요?",
    keywordsEn: ['Intuition', 'Creativity', 'Sensitivity', 'Persistence'],
    keywordsKo: ['직관', '창의성', '감수성', '끈기'],
  },
};

// ═══════════════════════════════════════════════
// DAEUN NARRATIVE SYSTEM
// ═══════════════════════════════════════════════
const ELEM_RELATION_CYCLE = ['Wood','Fire','Earth','Metal','Water'];

function getElementRelation(dayElement, daeunElement) {
  const idx = d => ELEM_RELATION_CYCLE.indexOf(d);
  const di  = idx(dayElement), ri = idx(daeunElement);
  if (di === -1 || ri === -1) return 'neutral';
  const diff = ((ri - di) + 5) % 5;
  switch(diff) {
    case 0: return 'same';
    case 1: return 'generated'; // daeun generates day
    case 2: return 'controlled'; // daeun controls day
    case 3: return 'controlling'; // day controls daeun
    case 4: return 'generating'; // day generates daeun
    default: return 'neutral';
  }
}

const DAEUN_NARRATIVE_EN = {
  same:       (age) => age < 20 ? "The energy of this period matched you perfectly — everything felt either too fast or, briefly, exactly right. There was a kind of intensity to your early years that others around you didn't quite share." : "This was a period of heightened competition and comparison. You found mirrors everywhere — people who reflected back who you were, sometimes flattering, sometimes uncomfortable. The decade asked: do you know yourself?",
  generated:  (age) => "This period carried a natural current in your direction. Things had a way of aligning — not perfectly, not without effort, but the conditions were favorable. Many people with your chart describe this kind of decade as the one where opportunities arrived without being chased.",
  generating: (age) => "This was a giving period — one where you poured your energy outward. Relationships, work, creative output. The resource flowed from you. Looking back, it may have felt generous or depleting depending on whether the giving was chosen.",
  controlled: (age) => age < 25 ? "This period had a quality of friction to it. Something kept not quite going the way you intended. That wasn't punishment — it was the chart building in resistance while your character was still forming." : "There was pressure in this decade. Things that should have been easier weren't. The question the period kept asking was: are you doing this because you want to, or because you don't know another way?",
  controlling:(age) => "This was a period of forward motion. You were in charge of the energy — pushing, building, deciding. It cost you something. The drive that made things happen had a price, usually in relationships or rest.",
  neutral:    (age) => "This period carried a quiet steadiness — not dramatic highs or lows, but a reliable undercurrent that let you move at your own pace.",
};

const DAEUN_NARRATIVE_KO = {
  same:       (age) => age < 20 ? "이 시기의 에너지는 당신과 완벽하게 맞았습니다 — 모든 것이 너무 빠르거나, 잠깐 정확히 맞는 느낌이었습니다. 주변의 타인들이 완전히 공유하지 못하는 강도가 어린 시절에 있었습니다." : "이 시기는 경쟁과 비교가 고조된 시기였습니다. 어디에서나 거울을 찾았습니다 — 당신이 누구인지 반영하는 사람들. 10년이 물었습니다: 당신은 자신을 아는가?",
  generated:  (age) => "이 시기는 당신 방향으로 자연스러운 흐름이 있었습니다. 완벽하지 않아도, 노력 없이도 아니지만 조건이 유리했습니다. 당신의 사주를 가진 많은 사람들이 이런 10년을 기회가 쫓지 않아도 찾아온 시기로 묘사합니다.",
  generating: (age) => "이것은 베푸는 시기였습니다 — 에너지를 밖으로 쏟아냈습니다. 관계, 일, 창의적 산출물. 자원이 당신으로부터 흘렀습니다. 돌이켜보면, 그 베풀기가 선택이었는지에 따라 관대하거나 고갈되는 느낌이었을 겁니다.",
  controlled: (age) => age < 25 ? "이 시기는 마찰의 질이 있었습니다. 의도한 대로 잘 되지 않는 무언가가 있었습니다. 그것은 처벌이 아니었습니다 — 성격이 아직 형성되는 동안 저항을 쌓는 사주였습니다." : "이 10년에는 압박이 있었습니다. 더 쉬워야 할 것들이 그렇지 않았습니다. 시기가 계속 물었습니다: 원해서 하는 건가, 아니면 다른 방법을 모르는 건가?",
  controlling:(age) => "이것은 앞으로 나아가는 시기였습니다. 당신이 에너지를 통제하고 있었습니다 — 밀고, 쌓고, 결정했습니다. 무언가를 댓가로 치렀습니다. 일을 이루게 만든 추진력에는 보통 관계나 휴식에서 대가가 있었습니다.",
  neutral:    (age) => "이 시기는 조용한 안정감을 품고 있었습니다. 극적인 기복보다는 묵직한 흐름 속에서 자신의 속도로 나아갈 수 있었던 시간.",
};

function getLifeStageEn(age) {
  if (age < 15) return 'Childhood';
  if (age < 25) return 'Adolescence';
  if (age < 35) return 'Young Adult';
  if (age < 45) return 'Early Midlife';
  if (age < 55) return 'Midlife';
  return 'Later Years';
}
function getLifeStageKo(age) {
  if (age < 15) return '아동기';
  if (age < 25) return '청소년기';
  if (age < 35) return '청년기';
  if (age < 45) return '중년 초반';
  if (age < 55) return '중년';
  return '노년기';
}

// ═══════════════════════════════════════════════
// ELEMENTS NARRATIVE
// ═══════════════════════════════════════════════
const ELEM_NARRATIVE_EN = {
  Wood:  { heavy:"You are always moving toward something. The problem is that you're sometimes not sure what — only that staying still feels like dying. This isn't ambition. This is a body that was built for growth.", lacking:"Without Wood, the direction takes longer to feel certain about. You can see clearly where you are. The destination requires intention." },
  Fire:  { heavy:"Everything you feel, you feel at full volume. Joy is enormous. Frustration is enormous. The people around you have learned to read your face like weather.", lacking:"Without Fire, the warmth is there — but it runs internal. You feel more than you show. This isn't coldness. It's a banked fire: enormous heat, very little visible flame." },
  Earth: { heavy:"You are the person others stabilize against. Your presence has a density to it — not heavy, just there in a way that makes people feel the ground beneath their feet.", lacking:"Without Earth, the center takes work to find. You're brilliant in motion and sometimes unmoored when the world stops." },
  Metal: { heavy:"You have a precision about you — in what you say, what you keep, who you let close. People experience this as control. From inside, it feels like clarity.", lacking:"Without Metal, the edges are softer than they should be. Saying no takes more energy than it costs most people." },
  Water: { heavy:"You think in currents. Ideas flow into other ideas. Plans branch into alternatives. When the world asks you to stop and commit to one path, part of you is always grieving the paths you didn't take.", lacking:"Without Water, the introspection doesn't come automatically. You live outward — visible, active, present. The inner life is quieter, and that's not a problem. It's a different kind of clarity." },
};
const ELEM_NARRATIVE_KO = {
  Wood:  { heavy:"당신은 항상 무언가를 향해 움직입니다. 문제는 그것이 무엇인지 때때로 확신하지 못한다는 것입니다 — 가만히 있는 것이 죽어가는 것 같다는 것만 알고 있습니다.", lacking:"木 없이, 방향을 확신하는 데 더 오래 걸립니다. 당신이 어디 있는지는 명확하게 볼 수 있습니다. 목적지에는 의도가 필요합니다." },
  Fire:  { heavy:"느끼는 모든 것을 최고 음량으로 느낍니다. 기쁨이 거대합니다. 좌절도 거대합니다. 주변 사람들은 당신의 얼굴을 날씨처럼 읽는 법을 배웠습니다.", lacking:"火 없이, 따뜻함은 있습니다 — 하지만 내면에서 흐릅니다. 보이는 것보다 더 많이 느낍니다. 차가움이 아닙니다. 잠재된 불입니다." },
  Earth: { heavy:"당신은 타인들이 안정을 찾는 사람입니다. 당신의 존재에는 밀도가 있습니다 — 무겁지는 않지만, 사람들이 발 아래 땅을 느끼게 하는 방식으로 거기 있습니다.", lacking:"土 없이, 중심을 찾는 데 노력이 필요합니다. 움직임 속에서는 탁월하지만 세상이 멈출 때 방향을 잃을 수 있습니다." },
  Metal: { heavy:"당신에게는 정밀함이 있습니다 — 말하는 것, 지키는 것, 가까이 허락하는 사람에 대해. 사람들은 이것을 통제로 경험합니다. 내부에서는 명확성으로 느낍니다.", lacking:"金 없이, 경계가 있어야 할 것보다 부드럽습니다. 아니오라고 말하는 것이 대부분의 사람들보다 더 많은 에너지가 필요합니다." },
  Water: { heavy:"생각은 흐름으로 움직입니다. 아이디어가 다른 아이디어로 흐릅니다. 세상이 한 길에 멈추고 헌신하도록 요구할 때, 당신의 일부는 항상 선택하지 않은 길을 애도합니다.", lacking:"水 없이, 내성이 자동으로 오지 않습니다. 외향적으로 살아갑니다 — 보이고, 능동적이고, 현존합니다. 내면의 삶이 더 조용합니다." },
};

// ═══════════════════════════════════════════════
// TODAY ENERGY HINT
// ═══════════════════════════════════════════════
function getTodayHintEn(element) {
  const now = new Date();
  const day = now.getDay();
  const hints = {
    Wood: ["Today the Wood energy says: start something. Even a small thing. The forward motion matters more than the destination right now.", "Rest is not retreat. Even Oak needs a dormant season.", "Someone in your orbit is watching you more carefully than you know. Walk with your full posture today."],
    Fire: ["Bring the full light today. Someone needs it.", "The sun doesn't ask if today is a good day to rise. Neither should you.", "Channel the warmth inward for a moment. What do you need that you haven't asked for?"],
    Earth: ["Ground first, move second. Whatever felt urgent yesterday — sleep on it one more day.", "Your stability is someone else's anchor right now. You probably don't know who.", "When was the last time the mountain moved? If it's been too long — now."],
    Metal: ["Precision is your gift today. Cut to the thing that matters.", "Not every conversation needs your full edge. Save it for what deserves it.", "The gem doesn't perform. It simply is. Be yourself without explanation today."],
    Water: ["Let the current take you somewhere unexpected today. Resist the urge to map everything.", "The river flows best when it doesn't question the landscape.", "Someone needs your depth today. Let them in, just a little."],
  };
  const arr = hints[element] || hints.Wood;
  return arr[day % arr.length];
}
function getTodayHintKo(element) {
  const now = new Date();
  const day = now.getDay();
  const hints = {
    Wood: ["오늘 木의 에너지가 말합니다: 무언가를 시작하세요. 작은 것이라도. 지금은 목적지보다 앞으로 나아가는 움직임이 중요합니다.", "휴식은 후퇴가 아닙니다. 거목도 휴면기가 필요합니다.", "당신의 궤도에 있는 누군가가 당신이 아는 것보다 더 주의 깊게 당신을 지켜보고 있습니다."],
    Fire: ["오늘 완전한 빛을 가져오세요. 누군가 그것이 필요합니다.", "태양은 오늘이 떠오르기 좋은 날인지 묻지 않습니다. 당신도 그럴 필요 없습니다.", "잠시 따뜻함을 내면으로 돌리세요. 아직 요청하지 않은 무엇이 필요한가요?"],
    Earth: ["먼저 땅을 다지고, 그 다음 움직이세요.", "당신의 안정이 지금 누군가의 닻입니다. 아마 누구인지 모를 겁니다.", "산이 마지막으로 움직인 게 언제였나요? 너무 오래되었다면 — 지금입니다."],
    Metal: ["오늘은 정밀함이 당신의 선물입니다. 중요한 것에 집중하세요.", "모든 대화에 날카로운 날이 필요하지 않습니다. 그럴 가치가 있는 것을 위해 아껴두세요.", "보석은 연기하지 않습니다. 단순히 존재합니다. 오늘은 설명 없이 자신이 되세요."],
    Water: ["오늘은 흐름이 예상치 못한 곳으로 데려가도록 두세요.", "강은 지형에 의문을 품지 않을 때 가장 잘 흐릅니다.", "오늘 누군가 당신의 깊이가 필요합니다. 조금만 들이세요."],
  };
  const arr = hints[element] || hints.Wood;
  return arr[day % arr.length];
}

// ═══════════════════════════════════════════════
// CURRENT DAEUN NARRATIVE
// ═══════════════════════════════════════════════
function getCurrentNarrativeEn(daeun, dayElement) {
  const rel = getElementRelation(dayElement, daeun.element);
  const map = {
    same: `You are in a decade of mirrors. The energy surrounding you reflects your own nature back — intensified. Collaboration or competition, depending on which way you face. This is a time when your identity is being tested and clarified.`,
    generated: `The energy of this cycle flows in your direction. You didn't have to chase it — it arrived. This is a supportive decade: conditions that make your natural strengths more effective, opportunities that align with who you already are.`,
    generating: `This decade has been asking something of you. Your energy is flowing outward — into work, relationships, projects. The question to sit with: is this giving chosen, or have you simply not stopped to decide?`,
    controlled: `There's friction in this decade. Not punishment — resistance that reveals structure. Things that were propped up are being tested for their foundations. This is the decade that separates what you actually are from what you were pretending.`,
    controlling: `You are driving the energy of this cycle. The initiative is yours. So are the consequences. This is a decade for bold movement — but the metal that strikes too hard against stone can crack. Know when to force and when to wait.`,
  };
  return map[rel] || map.same;
}
function getCurrentNarrativeKo(daeun, dayElement) {
  const rel = getElementRelation(dayElement, daeun.element);
  const map = {
    same: `당신은 거울의 10년 안에 있습니다. 주변의 에너지가 당신 자신의 본성을 다시 반영합니다 — 강화된 형태로. 어떤 방향을 향하느냐에 따라 협력 또는 경쟁. 이것은 정체성이 시험되고 명확해지는 시간입니다.`,
    generated: `이 대운의 에너지는 당신의 방향으로 흐릅니다. 쫓지 않아도 도착했습니다. 이것은 지지하는 10년입니다: 당신의 자연스러운 강점을 더 효과적으로 만드는 조건들.`,
    generating: `이 10년은 당신에게 무언가를 요구해왔습니다. 당신의 에너지는 밖으로 흐르고 있습니다 — 일, 관계, 프로젝트로. 앉아서 생각해볼 질문: 이 베풀기는 선택인가요, 아니면 단순히 멈추지 않은 건가요?`,
    controlled: `이 10년에는 마찰이 있습니다. 처벌이 아니라 — 구조를 드러내는 저항. 받쳐져 있던 것들이 기반을 시험받고 있습니다.`,
    controlling: `당신은 이 대운의 에너지를 이끌고 있습니다. 주도권은 당신의 것입니다. 결과도 마찬가지입니다. 이것은 대담한 움직임의 10년입니다 — 하지만 돌에 너무 강하게 부딪히는 금속은 금이 갈 수 있습니다.`,
  };
  return map[rel] || map.same;
}

// ═══════════════════════════════════════════════
// FORM LOGIC
// ═══════════════════════════════════════════════
function populateTimeSelects() {
  const hourSel = document.getElementById('inp-hour');
  const minSel  = document.getElementById('inp-minute');
  hourSel.innerHTML = `<option value="">Hour</option>`;
  for (let h = 0; h < 24; h++) {
    const lbl = h === 0 ? '0 (midnight)' : h === 12 ? '12 (noon)' : `${h}`;
    hourSel.innerHTML += `<option value="${h}">${lbl.padStart(2,'0')}:xx</option>`;
  }
  minSel.innerHTML = `<option value="">Minute</option>`;
  for (let m = 0; m < 60; m += 5) {
    minSel.innerHTML += `<option value="${m}">${String(m).padStart(2,'0')}</option>`;
  }
}

function populateDateSelects() {
  const yearSel = document.getElementById('inp-year');
  const maxYear = new Date().getFullYear() - 5;
  yearSel.innerHTML = `<option value="">Year</option>`;
  for (let y = maxYear; y >= 1900; y--) {
    yearSel.innerHTML += `<option value="${y}">${y}</option>`;
  }
  updateDaySelect();
  // dynamic update on month/year change
  document.getElementById('inp-month').addEventListener('change', updateDaySelect);
  document.getElementById('inp-year').addEventListener('change', updateDaySelect);
}

function updateDaySelect() {
  const yearSel  = document.getElementById('inp-year');
  const monthSel = document.getElementById('inp-month');
  const daySel   = document.getElementById('inp-day');
  const yr = parseInt(yearSel.value);
  const mo = parseInt(monthSel.value);
  const prevDay = parseInt(daySel.value) || 0;
  let maxDays = 31;
  if (mo && yr) {
    maxDays = new Date(yr, mo, 0).getDate();
  } else if (mo) {
    const mDays = [31,29,31,30,31,30,31,31,30,31,30,31];
    maxDays = mDays[mo-1] || 31;
  }
  daySel.innerHTML = `<option value="">Day</option>`;
  for (let d = 1; d <= maxDays; d++) {
    daySel.innerHTML += `<option value="${d}" ${d===prevDay?'selected':''}>${d}</option>`;
  }
}

function selectGender(g) {
  selectedGender = g;
  document.getElementById('gb-m').classList.toggle('selected', g === 'M');
  document.getElementById('gb-f').classList.toggle('selected', g === 'F');
  const gbO = document.getElementById('gb-o');
  if (gbO) gbO.classList.toggle('selected', g === 'O');
}

let _noTimeActive = false;
function toggleNoTime() {
  _noTimeActive = !_noTimeActive;
  document.getElementById('inp-hour').disabled   = _noTimeActive;
  document.getElementById('inp-minute').disabled = _noTimeActive;
  const lbl = document.getElementById('notime-label');
  if (lbl) {
    lbl.textContent = _noTimeActive
      ? (currentLang==='ko' ? '시간 입력하기' : 'I know my birth time')
      : (currentLang==='ko' ? '태어난 시간을 모르시나요?' : "Don't know your birth time?");
  }
  showToast(_noTimeActive
    ? 'Birth time set to unknown — we'll use noon.'
    : 'Enter your birth time above.');
}

function nextStep() {
  const name   = document.getElementById('inp-name').value.trim();
  const yr     = document.getElementById('inp-year').value;
  const mo     = document.getElementById('inp-month').value;
  const dy     = document.getElementById('inp-day').value;
  const gErr   = !selectedGender;
  const nameErr= !name;
  const dateErr= !yr || !mo || !dy;

  if (nameErr) { showErrEl('err-name'); return; }
  if (dateErr) { showErrEl('err-date'); return; }
  if (gErr)    { showErrEl('err-gender'); return; }

  document.getElementById('step1').classList.remove('active');
  document.getElementById('step2').classList.add('active');
  document.getElementById('dot1').classList.remove('active');
  document.getElementById('dot2').classList.add('active');
}

function prevStep() {
  document.getElementById('step2').classList.remove('active');
  document.getElementById('step1').classList.add('active');
  document.getElementById('dot2').classList.remove('active');
  document.getElementById('dot1').classList.add('active');
}

function showErrEl(id) {
  const el = document.getElementById(id);
  if (!el) return;
  el.classList.add('show');
  setTimeout(() => el.classList.remove('show'), 3000);
}

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2800);
}

function generateReport() {
  const name    = document.getElementById('inp-name').value.trim();
  const year    = parseInt(document.getElementById('inp-year').value);
  const month   = parseInt(document.getElementById('inp-month').value);
  const day     = parseInt(document.getElementById('inp-day').value);
  const noTime  = _noTimeActive;
  const hour    = noTime ? 12 : parseInt(document.getElementById('inp-hour').value) || 12;

  const pillars = calcFourPillars(year, month, day, hour, selectedGender, noTime);

  reportData = { name, year, month, day, hour, noTime, gender: selectedGender, pillars };

  // check unlock from sessionStorage token or URL order_id
  const params = new URLSearchParams(window.location.search);
  if (isUnlocked()) {
    reportData.unlocked = true;
  } else if (params.get('order_id')) {
    // verify with server; unlock after verification
    verifyAndUnlock(params.get('order_id')).then(ok => {
      if (ok) showToast('✦ Your full reading is now unlocked!');
    });
  }

  document.getElementById('section-form').style.display = 'none';

  // Loading scene (P0-20)
  showLoadingScene(() => {
    document.getElementById('section-results').classList.add('visible');
    document.getElementById('chapterNav').classList.add('visible');
    renderReport(reportData);
    initReveal();
    initChapterNav();
    initExitIntent();
  });

  // Sticky CTA: show when chapter-1 is in view, hide when unlocked
  if (!reportData.unlocked) {
    const stickyCta = document.getElementById('sticky-cta');
    const ch1 = document.getElementById('chapter-1');
    if (stickyCta && ch1) {
      const ctaObs = new IntersectionObserver((entries) => {
        entries.forEach(e => {
          if (e.isIntersecting) {
            stickyCta.style.display = 'flex';
            ctaObs.unobserve(e.target);
          }
        });
      }, { threshold: 0.1 });
      ctaObs.observe(ch1);
    }
  }
}

// ═══════════════════════════════════════════════
// RENDER
// ═══════════════════════════════════════════════
function renderReport(data) {
  const { name, pillars } = data;
  const lang = currentLang;
  const dp   = pillars.dayPillar;
  const dm   = DM[dp.stem] || DM['甲'];

  // ── Chapter 1 ──────────────────────────
  document.getElementById('dm-char').textContent  = dp.stem + dp.branch;
  document.getElementById('dm-label').textContent = lang === 'en' ? dm.labelEn : dm.labelKo;
  // Use 60-pillar narrative if available, else fallback to DM stem narrative
  const pillKey = dp.stem + dp.branch;
  const pillar = PILLAR_NARRATIVES[pillKey] || null;
  document.getElementById('dm-hook').textContent  = pillar
    ? (lang === 'en' ? pillar.hook : pillar.hookKo)
    : (lang === 'en' ? dm.hookEn  : dm.hookKo);

  // identity tags
  const elemName = lang === 'en' ? dp.element : ELEM_KR[dp.element];
  const tags = [
    `<span>✦</span>${elemName}`,
    `<span>✦</span>${escapeHtml(dp.branch)} (${escapeHtml(lang === 'en' ? dp.branchElement : ELEM_KR[dp.branchElement])})`,
    `<span>✦</span>${escapeHtml(dp.stem)}${escapeHtml(dp.branch)}`,
  ];
  document.getElementById('identity-tags').innerHTML = tags.map(t => `<div class="identity-tag">${t}</div>`).join('');

  // story body — use PILLAR_NARRATIVES if available, else fallback to DM
  const pillKey2 = dp.stem + dp.branch;
  const pillar2 = PILLAR_NARRATIVES[pillKey2] || null;
  document.getElementById('dm-body1').textContent = pillar2
    ? (lang === 'en' ? pillar2.origin     : pillar2.originKo)
    : (lang === 'en' ? dm.originEn     : dm.originKo);
  document.getElementById('dm-body2').textContent = pillar2
    ? (lang === 'en' ? pillar2.shadow     : pillar2.shadowKo)
    : (lang === 'en' ? dm.shadowEn     : dm.shadowKo);
  document.getElementById('dm-body3').textContent = pillar2
    ? (lang === 'en' ? pillar2.invitation : pillar2.invitationKo)
    : (lang === 'en' ? dm.invitationEn : dm.invitationKo);

  // pillars grid
  const pLabels = lang === 'en' ? ['Year','Month','Day','Hour'] : ['년주','월주','일주','시주'];
  const cols    = [pillars.yearPillar, pillars.monthPillar, pillars.dayPillar, pillars.hourPillar];
  document.getElementById('pillar-grid').innerHTML = cols.map((p, i) => {
    if (!p) return `<div class="pillar-col"><span class="pillar-label">${pLabels[i]}</span><span class="pillar-stem-char pillar-stem" style="color:var(--text-muted)">—</span></div>`;
    return `<div class="pillar-col ${i===2?'day-col':''}" data-element="${p.element}">
      <span class="pillar-label">${pLabels[i]}${i===2?' ★':''}</span>
      <span class="pillar-stem-char pillar-stem">${p.stem}</span>
      <span class="pillar-branch-char">${p.branch}</span>
      <div><span class="pillar-elem-dot elem-${p.element}"></span></div>
    </div>`;
  }).join('');

  // elements grid
  const elems = ['Wood','Fire','Earth','Metal','Water'];
  const eLabels = lang === 'en' ? {Wood:'Wood',Fire:'Fire',Earth:'Earth',Metal:'Metal',Water:'Water'} : ELEM_KR;
  const maxVal = Math.max(...elems.map(e => pillars.elements[e]));
  document.getElementById('elements-grid').innerHTML = elems.map(e => {
    const val = pillars.elements[e];
    const h   = maxVal ? Math.round((val / maxVal) * 50) + 10 : 10;
    return `<div class="elem-col">
      <div class="elem-bar-wrap"><div class="elem-bar elem-${e}" style="height:${h}px"></div></div>
      <div class="elem-count">${val}</div>
      <div class="elem-name">${eLabels[e]}</div>
    </div>`;
  }).join('');

  // elements narrative
  const dominant = elems.reduce((a,b) => pillars.elements[a] >= pillars.elements[b] ? a : b);
  const lacking  = elems.reduce((a,b) => pillars.elements[a] <= pillars.elements[b] ? a : b);
  const narr = lang === 'en' ? ELEM_NARRATIVE_EN : ELEM_NARRATIVE_KO;
  const elemText = pillars.elements[dominant] >= 3
    ? narr[dominant].heavy
    : (pillars.elements[lacking] === 0 ? narr[lacking].lacking : (lang === 'en' ? `Your energy is balanced across all five elements — a rare chart. This gives you unusual flexibility, but can also mean the center is harder to find.` : `당신의 에너지는 오행 전체에 걸쳐 균형 잡혀 있습니다 — 드문 사주입니다. 이것은 비범한 유연성을 주지만, 중심을 찾기 어려울 수도 있습니다.`));
  document.getElementById('elements-narrative').textContent = elemText;

  // ── Chapter 2: Past Daeun ──────────────────
  const pastDaeun = pillars.daeun.filter(d => d.isPast);
  const resEl = lang === 'en' ? '💬 Does this time feel familiar?' : '💬 이 시기가 기억나시나요?';
  document.getElementById('past-daeun-list').innerHTML = pastDaeun.map(d => {
    const rel  = getElementRelation(dp.element, d.element);
    const narr = lang === 'en' ? DAEUN_NARRATIVE_EN[rel](d.startAge) : DAEUN_NARRATIVE_KO[rel](d.startAge);
    const ls   = lang === 'en' ? getLifeStageEn(d.startAge) : getLifeStageKo(d.startAge);
    const pChar= lang === 'en' ? `${d.stem} ${d.branch}` : `${d.stemKr}${d.branchKr}`;
    return `<div class="daeun-card">
      <div class="daeun-top">
        <span class="daeun-era-badge era-past">${lang==='en'?'PAST':'과거'}</span>
        <span class="daeun-period">${d.startYear}–${d.endYear} · ${d.startAge}–${d.endAge}${lang==='en'?' yrs':'세'}</span>
      </div>
      <div class="daeun-lifestage">${ls}</div>
      <div class="daeun-pillars">${d.stem}<span>${d.branch}</span></div>
      <p class="daeun-narrative">${narr}</p>
      <p class="daeun-resonance">${resEl}</p>
    </div>`;
  }).join('') || `<p style="color:var(--text-muted);font-style:italic;padding:12px 0">${lang==='en'?'Your story is just beginning — no past cycles to reflect on yet.':'아직 과거 대운이 없습니다. 이야기는 이제 시작됩니다.'}</p>`;

  // ── Chapter 3: Current Daeun ──────────────
  const curDaeun = pillars.daeun.find(d => d.isCurrent);
  if (curDaeun) {
    document.getElementById('current-pillar-chars').textContent = `${curDaeun.stem}${curDaeun.branch}`;
    const curNarr = lang === 'en' ? getCurrentNarrativeEn(curDaeun, dp.element) : getCurrentNarrativeKo(curDaeun, dp.element);
    document.getElementById('current-desc').textContent = curNarr;
    // T3-B: Progress bar
    const progressEl = document.getElementById('current-daeun-progress');
    if (progressEl) {
      progressEl.innerHTML = renderDaeunProgress(curDaeun.startAge, data.year ? (new Date().getFullYear() - data.year) : curDaeun.startAge);
    }
  } else {
    document.getElementById('current-pillar-chars').textContent = '—';
    document.getElementById('current-desc').textContent = lang === 'en' ? 'Calculating your current cycle...' : '현재 대운을 계산 중입니다...';
  }

  // T2-A: Conviction section — update Day Pillar
  const convPillar = document.getElementById('conviction-pillar');
  if (convPillar) convPillar.textContent = dp.stem + dp.branch;

  // strengths grid
  const kw = lang === 'en' ? dm.keywordsEn : dm.keywordsKo;
  document.getElementById('strength-grid').innerHTML = kw.map((k, i) =>
    `<div class="strength-item ${i<2?'highlight':''}">${k}</div>`
  ).join('');

  // today hint
  document.getElementById('today-text').textContent = lang === 'en' ? getTodayHintEn(dp.element) : getTodayHintKo(dp.element);

  // past→present link
  if (curDaeun && pastDaeun.length > 0) {
    const prev = pastDaeun[pastDaeun.length - 1];
    const pText = lang === 'en'
      ? `${prev.stem}${prev.branch} (${prev.startYear}–${prev.endYear}) carried ${prev.element} energy. Now in ${curDaeun.stem}${curDaeun.branch}, you're moving through ${curDaeun.element}. That shift isn't random. The chart was always taking you somewhere.`
      : `${prev.stemKr}${prev.branchKr} (${prev.startYear}–${prev.endYear}) 대운은 ${ELEM_KR[prev.element]}의 에너지였습니다. 이제 ${curDaeun.stemKr}${curDaeun.branchKr} 대운에서 ${ELEM_KR[curDaeun.element]}을 통과하고 있습니다. 이 전환은 우연이 아닙니다.`;
    document.getElementById('past-present-link').textContent = pText;
  }

  // ── Bridge 3→4 personalization — dynamic next decade year ────────────
  const nextDaeunForBridge = pillars.daeun.find(d => d.isFuture);
  const bridge34b = document.getElementById('bridge-34b');
  if (bridge34b && nextDaeunForBridge) {
    const nextYear = nextDaeunForBridge.startYear;
    const nextDecadeYear = Math.ceil(nextYear / 10) * 10; // next decade marker
    bridge34b.innerHTML = lang === 'ko'
      ? `${nextDecadeYear}년에 다음 챕터가 펼쳐집니다.`
      : `The decade ahead opens in ${nextDecadeYear}.`;
  }

  // ── Chapter 4: Future Daeun ───────────────
  const futureDaeun = pillars.daeun.filter(d => d.isFuture).slice(0, 3);
  if (data.unlocked) {
    // unlock chapter 4 fully
    document.getElementById('future-daeun-list').innerHTML = futureDaeun.map((d, i) => {
      const rel  = getElementRelation(dp.element, d.element);
      const narr = lang === 'en' ? DAEUN_NARRATIVE_EN[rel](d.startAge) : DAEUN_NARRATIVE_KO[rel](d.startAge);
      return `<div class="future-daeun-card">
        <div class="fdc-period">${d.startYear}–${d.endYear} · ${d.startAge}–${d.endAge}${lang==='en'?' yrs':'세'}</div>
        <div class="fdc-pillar">${d.stem}${d.branch}</div>
        <p class="fdc-teaser">${narr}</p>
      </div>`;
    }).join('');
    document.getElementById('paywall-cta').style.display = 'none';
  } else {
    // blur preview
    document.getElementById('future-daeun-list').innerHTML = futureDaeun.map((d, i) => {
      const teaser = lang === 'en'
        ? `In this decade, the energy of ${d.element} meets your ${dp.element} nature. The chart has a story for this period — one that begins with...`
        : `이 10년에는 ${ELEM_KR[d.element]}의 에너지가 당신의 ${ELEM_KR[dp.element]} 본성을 만납니다. 이 시기를 위한 이야기가 있습니다...`;
      const cls = i === 0 ? 'partial' : 'locked';
      return `<div class="future-daeun-card ${cls}">
        <div class="fdc-period">${d.startYear}–${d.endYear} · ${d.startAge}–${d.endAge}${lang==='en'?' yrs':'세'}</div>
        <div class="fdc-pillar">${d.stem}${d.branch}</div>
        <p class="fdc-teaser">${teaser}</p>
        ${i===0 ? '<div class="fdc-fade"></div>' : ''}
      </div>`;
    }).join('') + `<div class="more-decades-hint"><p>+ 2 more decades in your chart</p></div>`;
  }

  // update paywall CTA text with personalization
  const nextDaeun = futureDaeun[0];
  if (!data.unlocked) {
    // paywall hook — static Seer voice
    document.getElementById('paywall-hook').textContent = lang === 'en'
      ? 'The chart knew. It always knew.'
      : '사주는 알고 있었습니다. 처음부터.';
    // paywall hook sub — personalized
    const subEl = document.getElementById('paywall-hook-sub');
    if (subEl && nextDaeun) {
      const safeName = escapeHtml(name);
      subEl.innerHTML = lang === 'en'
        ? `${safeName ? safeName + ' — t' : 'T'}he chart already knows what ${nextDaeun.startYear} brings.`
        : `${safeName ? safeName + ', ' : ''}다음 대운은 ${nextDaeun.startYear}년에 시작됩니다.`;
    }
  }

  // update paywall-name-span (conviction/trust section)
  const nameSpan = document.getElementById('paywall-name-span');
  if (nameSpan) nameSpan.textContent = name ? name + ', ' : '';

  // update static i18n strings
  Object.keys(T).forEach(id => {
    const el = document.getElementById(id);
    if (el && T[id][lang]) el.innerHTML = T[id][lang];
  });
}

// ═══════════════════════════════════════════════
// REVEAL ON SCROLL
// ═══════════════════════════════════════════════
function initReveal() {
  const els = document.querySelectorAll('.reveal');
  const obs = new IntersectionObserver((entries) => {
    entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('visible'); obs.unobserve(e.target); } });
  }, { threshold: 0.12 });
  els.forEach(el => obs.observe(el));
}

// ═══════════════════════════════════════════════
// CHAPTER NAV
// ═══════════════════════════════════════════════
function initChapterNav() {
  const dots = document.querySelectorAll('.cnav-dot');
  dots.forEach(dot => {
    dot.addEventListener('click', () => {
      const ch = document.getElementById('chapter-' + dot.dataset.ch);
      if (ch) ch.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });
  });

  const chapters = [1,2,3,4].map(n => document.getElementById('chapter-' + n)).filter(Boolean);
  const chObs = new IntersectionObserver((entries) => {
    entries.forEach(e => {
      if (e.isIntersecting) {
        const id = e.target.id.replace('chapter-','');
        dots.forEach(d => d.classList.toggle('active', d.dataset.ch === id));
      }
    });
  }, { threshold: 0.3 });
  chapters.forEach(c => chObs.observe(c));
}

// ═══════════════════════════════════════════════
// ACCORDION
// ═══════════════════════════════════════════════
function toggleAccordion(header) {
  header.classList.toggle('open');
  const body = header.nextElementSibling;
  body.classList.toggle('open');
}

// ═══════════════════════════════════════════════
// INIT
// ═══════════════════════════════════════════════
document.addEventListener('DOMContentLoaded', () => {
  populateTimeSelects();
  populateDateSelects();
  setLang('en');
});

function openPayModal() {
  window.open(CHECKOUT_URL, '_blank');
}

// ═══════════════════════════════════════════════
// EMAIL CAPTURE
// ═══════════════════════════════════════════════
function saveEmail() {
  const email = document.getElementById('inp-email').value.trim();
  if (!email || !email.includes('@')) { showToast('Please enter a valid email.'); return; }
  localStorage.setItem('momentor_email', email);
  document.getElementById('email-capture-form').style.display = 'none';
  document.getElementById('email-captured-msg').style.display = 'block';
  showToast('✦ Reading link saved!');
}

// ═══════════════════════════════════════════════
// LOADING SCENE (P0-20)
// ═══════════════════════════════════════════════
function showLoadingScene(onComplete) {
  const overlay = document.getElementById('loading-overlay');
  const textEl  = document.getElementById('loading-text');
  const tsEl    = document.getElementById('loading-timestamp');
  const msgs = [
    'Calculating your Four Pillars...',
    'Reading the 60-year cycle...',
    'Tracing your decade energies...',
    'Your chart is ready.'
  ];
  const now = new Date();
  tsEl.textContent = `${now.toLocaleDateString('en-US', {year:'numeric',month:'short',day:'numeric'})} · ${now.toLocaleTimeString('en-US', {hour:'2-digit',minute:'2-digit'})}`;
  overlay.style.display = 'flex';
  overlay.style.opacity = '1';
  let step = 0;
  textEl.textContent = msgs[step];
  const interval = setInterval(() => {
    step++;
    if (step < msgs.length) {
      textEl.classList.add('fade-out');
      setTimeout(() => {
        textEl.textContent = msgs[step];
        textEl.classList.remove('fade-out');
      }, 400);
    }
    if (step >= msgs.length - 1) {
      clearInterval(interval);
      setTimeout(() => {
        overlay.classList.add('hidden');
        setTimeout(() => { overlay.style.display = 'none'; overlay.classList.remove('hidden'); overlay.style.opacity = '1'; onComplete(); }, 500);
      }, 700);
    }
  }, 750);
}

// ═══════════════════════════════════════════════
// EXIT INTENT (P0 기술 제약)
// ═══════════════════════════════════════════════
let _exitShown = false;
function initExitIntent() {
  if (_exitShown) return;
  const isMobile = window.innerWidth < 768 || /Mobi/i.test(navigator.userAgent);
  if (!isMobile) {
    // Desktop: mouseleave (heading to address bar)
    document.addEventListener('mouseleave', function onMouseLeave(e) {
      if (e.clientY < 0 && !_exitShown) {
        _exitShown = true;
        document.getElementById('exit-popup').classList.add('show');
        document.removeEventListener('mouseleave', onMouseLeave);
      }
    });
  } else {
    // Mobile: scroll 70% + 3초 타이머
    let timer70Started = false;
    const scrollThreshold = () => {
      const scrolled = window.scrollY / (document.body.scrollHeight - window.innerHeight);
      if (scrolled > 0.70 && !timer70Started && !_exitShown) {
        timer70Started = true;
        setTimeout(() => {
          if (!_exitShown) {
            _exitShown = true;
            document.getElementById('exit-popup').classList.add('show');
          }
        }, 3000);
      }
    };
    window.addEventListener('scroll', scrollThreshold, { passive: true });
  }
}
</script>
</body>
</html>